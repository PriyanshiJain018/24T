<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ - Spiritual Journey Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #1f2937;
        }
        
        .game-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .game-header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .game-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }
        
        .game-title {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }
        
        .game-subtitle {
            color: #6b7280;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--card-color, #3b82f6);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--card-color, #3b82f6);
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 13px;
        }
        
        .achievements-banner {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #f59e0b;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .achievement-item {
            display: inline-block;
            margin: 5px;
            padding: 5px 10px;
            background: white;
            border-radius: 20px;
            font-size: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .game-stage {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            animation: slideIn 0.6s ease;
            position: relative;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .gunasthan-display {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
        }
        
        .gunasthan-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
        }
        
        .gunasthan-number {
            font-size: 56px;
            font-weight: bold;
            color: white;
            margin-bottom: 15px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .gunasthan-name {
            font-size: 26px;
            font-weight: 600;
            color: white;
            margin-bottom: 8px;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .gunasthan-english {
            font-size: 18px;
            color: rgba(255,255,255,0.9);
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .gunasthan-description {
            font-size: 15px;
            color: rgba(255,255,255,0.85);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }
        
        .scenario-content {
            background: #f8fafc;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid #3b82f6;
        }
        
        .scenario-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 12px;
        }
        
        .scenario-text {
            line-height: 1.7;
            color: #374151;
            margin-bottom: 15px;
        }
        
        .choices-container {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .choice-button {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .choice-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .choice-button:hover::before {
            left: 100%;
        }
        
        .choice-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }
        
        .choice-button.disabled {
            background: linear-gradient(135deg, #9ca3af, #6b7280);
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .choice-button.disabled:hover {
            transform: none;
        }
        
        .choice-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .choice-title {
            font-weight: 600;
            font-size: 18px;
        }
        
        .choice-difficulty {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            background: rgba(255,255,255,0.2);
            margin-left: auto;
        }
        
        .choice-description {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .choice-effects {
            font-size: 12px;
            opacity: 0.8;
            display: flex;
            gap: 15px;
        }
        
        .message {
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            font-weight: 500;
            animation: messageSlide 0.5s ease;
        }
        
        @keyframes messageSlide {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .message.success {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border: 1px solid #86efac;
            color: #166534;
            border-left: 4px solid #22c55e;
        }
        
        .message.error {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border: 1px solid #f87171;
            color: #991b1b;
            border-left: 4px solid #ef4444;
        }
        
        .message.warning {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #fbbf24;
            color: #92400e;
            border-left: 4px solid #f59e0b;
        }
        
        .message.info {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            border: 1px solid #60a5fa;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }
        
        .progress-path {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin: 25px 0;
            flex-wrap: wrap;
            padding: 20px;
            background: rgba(255,255,255,0.9);
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }
        
        .path-stage {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .path-stage.completed {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .path-stage.current {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            animation: currentPulse 2s infinite;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.6);
        }
        
        .path-stage.locked {
            background: #9ca3af;
            color: #6b7280;
        }
        
        .path-stage:hover:not(.locked) {
            transform: scale(1.1);
        }
        
        @keyframes currentPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 20px rgba(59, 130, 246, 0.6); }
            50% { transform: scale(1.1); box-shadow: 0 6px 25px rgba(59, 130, 246, 0.8); }
        }
        
        .path-arrow {
            color: #6b7280;
            font-size: 16px;
            font-weight: bold;
        }
        
        .quiz-container {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border: 2px solid #0ea5e9;
            border-radius: 16px;
            padding: 25px;
            margin: 20px 0;
            animation: quizAppear 0.5s ease;
        }
        
        @keyframes quizAppear {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .quiz-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .quiz-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .quiz-title {
            font-size: 20px;
            font-weight: 600;
            color: #0c4a6e;
            margin-bottom: 8px;
        }
        
        .quiz-question {
            font-weight: 600;
            margin-bottom: 20px;
            color: #1e40af;
            font-size: 18px;
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 12px;
            border-left: 4px solid #3b82f6;
        }
        
        .quiz-options {
            display: grid;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .quiz-option {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .quiz-option:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }
        
        .quiz-option.selected {
            border-color: #3b82f6;
            background: #dbeafe;
            color: #1e40af;
        }
        
        .quiz-submit {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quiz-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        
        .quiz-submit:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .action-button {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .action-button.primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }
        
        .action-button.secondary {
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .action-button:hover {
            transform: translateY(-2px);
        }
        
        .karma-display {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #f59e0b;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .karma-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 15px;
            text-align: center;
            font-size: 16px;
        }
        
        .karma-bars {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .karma-bar {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .karma-name {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .karma-progress {
            width: 100%;
            height: 8px;
            background: #f3f4f6;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }
        
        .karma-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s ease;
            position: relative;
        }
        
        .karma-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: karmaShine 2s infinite;
        }
        
        @keyframes karmaShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .karma-value {
            font-size: 12px;
            color: #4b5563;
            text-align: center;
        }
        
        .hidden {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
        }
        
        .emergency-close {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            z-index: 10001;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
            transition: all 0.3s ease;
        }
        
        .emergency-close:hover {
            background: #dc2626;
            transform: scale(1.1);
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-overlay.hidden {
            display: none !important;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalSlide 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalSlide {
            from { transform: translateY(-50px) scale(0.95); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        .tips-panel {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .tips-title {
            font-weight: 600;
            color: #0c4a6e;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tips-list {
            list-style: none;
            padding: 0;
        }
        
        .tips-list li {
            padding: 5px 0;
            color: #0f172a;
            font-size: 14px;
        }
        
        .tips-list li::before {
            content: 'üí°';
            margin-right: 8px;
        }
        
        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
            }
            
            .game-header {
                padding: 20px;
            }
            
            .game-title {
                font-size: 26px;
            }
            
            .gunasthan-number {
                font-size: 42px;
            }
            
            .gunasthan-name {
                font-size: 22px;
            }
            
            .game-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .path-stage {
                width: 36px;
                height: 36px;
                font-size: 12px;
            }
            
            .choice-button {
                padding: 15px;
                font-size: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .game-stats {
                grid-template-columns: 1fr;
            }
            
            .progress-path {
                gap: 6px;
            }
            
            .path-stage {
                width: 32px;
                height: 32px;
                font-size: 11px;
            }
            
            .path-arrow {
                font-size: 14px;
            }
        }
        
        @keyframes flash {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.5; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <div class="game-title">üßò ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ</div>
            <div class="game-subtitle">Interactive Spiritual Journey Through 14 Stages of Soul Development</div>
            
            <div id="timer-warning" class="hidden" style="background: linear-gradient(135deg, #fef3c7, #fde68a); border: 1px solid #f59e0b; border-radius: 12px; padding: 15px; margin-top: 15px; text-align: center;">
                <div style="font-weight: 600; color: #92400e; margin-bottom: 8px;">‚è∞ ‡§Æ‡§∞‡§£‡§ï‡§æ‡§≤ ‡§®‡§ø‡§ï‡§ü - Death Approaching</div>
                <div id="countdown-display" style="font-size: 24px; font-weight: bold; color: #dc2626;">--:--</div>
                <div style="font-size: 12px; color: #78350f; margin-top: 5px;">Complete your journey before time runs out or face rebirth!</div>
            </div>
        </div>
        
        <div class="achievements-banner" id="achievements-banner">
            <div style="font-weight: 600; color: #92400e; margin-bottom: 8px;">üèÜ Achievements</div>
            <div id="achievements-list">
                <span class="achievement-item">üéØ Start Journey</span>
            </div>
        </div>
        
        <div class="game-stats">
            <div class="stat-card" style="--card-color: #3b82f6">
                <div class="stat-value" id="current-stage">1</div>
                <div class="stat-label">Current Gunasthan</div>
            </div>
            <div class="stat-card" style="--card-color: #10b981">
                <div class="stat-value" id="total-moves">0</div>
                <div class="stat-label">Total Transitions</div>
            </div>
            <div class="stat-card" style="--card-color: #f59e0b">
                <div class="stat-value" id="highest-reached">1</div>
                <div class="stat-label">Highest Stage</div>
            </div>
            <div class="stat-card" style="--card-color: #8b5cf6">
                <div class="stat-value" id="game-time">0:00</div>
                <div class="stat-label">Journey Time</div>
            </div>
            <div class="stat-card" style="--card-color: #ec4899">
                <div class="stat-value" id="quiz-score">0</div>
                <div class="stat-label">Quiz Score</div>
            </div>
            <div class="stat-card" style="--card-color: #14b8a6">
                <div class="stat-value" id="achievement-count">1</div>
                <div class="stat-label">Achievements</div>
            </div>
        </div>
        
        <div class="progress-path" id="progress-path"></div>
        
        <div class="game-stage" id="game-stage">
            <div class="gunasthan-display" id="gunasthan-display"></div>
            
            <div class="scenario-content" id="scenario-content"></div>
            
            <div class="choices-container" id="choices-container"></div>
            
            <div id="message-container"></div>
            
            <div id="quiz-container" class="hidden"></div>
            
            <div class="tips-panel" id="tips-panel">
                <div class="tips-title">
                    üéØ Journey Guidelines
                </div>
                <ul class="tips-list" id="tips-list">
                    <li>Choose wisely - some paths lead to spiritual progress, others to downfall</li>
                    <li>‚è∞ Time limit starts from 7th Gunasthan - complete quickly or face rebirth</li>
                    <li>üìù Quiz questions test your understanding of Jain philosophy</li>
                    <li>üíé Lower karma levels enable higher spiritual paths</li>
                    <li>üéØ Learn from all choices - both positive and negative outcomes teach valuable lessons</li>
                    <li>üìä Karma consequences are revealed after each choice - learn from them!</li>
                </ul>
            </div>
            
            <div class="karma-display" id="karma-display"></div>
        </div>
        
        <div class="action-buttons">
            <button class="action-button secondary" onclick="showHelp()">‚ùì Help</button>
            <button class="action-button secondary" onclick="showProgress()">üìä Progress</button>
            <button class="action-button secondary" onclick="showDefinitions()">üìö Definitions</button>
            <button class="action-button primary" onclick="resetGame()">üîÑ New Journey</button>
        </div>
    </div>

    <!-- Emergency close button for stuck modals -->
    <button id="emergency-close" class="emergency-close hidden" onclick="emergencyReset()" title="Emergency Close - Click if interface is stuck">
        ‚úï
    </button>

    <div id="modal" class="modal-overlay hidden" style="display: none;" onclick="forceCloseModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #e5e7eb; padding-bottom: 15px;">
                <h3 style="margin: 0; color: #1f2937;">Information</h3>
                <button onclick="forceCloseModal()" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 12px; cursor: pointer; font-weight: bold; transition: all 0.2s ease;" onmouseover="this.style.background='#dc2626'" onmouseout="this.style.background='#ef4444'">‚úï Close</button>
            </div>
            <div id="modal-body"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="action-button primary" onclick="forceCloseModal()">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Complete accurate data from main app
        const gunasthansData = {
            1: { nameHi: "‡§Æ‡§ø‡§•‡•ç‡§Ø‡§æ‡§§‡•ç‡§µ", nameEn: "Mithyatva", english: "False Belief", description: "The soul possesses wrong belief and is bound by all karmas. Complete spiritual darkness.", color: "#EF4444" },
            2: { nameHi: "‡§∏‡§æ‡§∏‡§æ‡§¶‡§®", nameEn: "Sasadan", english: "Downfall", description: "Temporary stage when a soul falls from right belief back to wrong belief.", color: "#F87171" },
            3: { nameHi: "‡§Æ‡§ø‡§∂‡•ç‡§∞", nameEn: "Mishra", english: "Mixed Belief", description: "The soul has mixed right and wrong beliefs simultaneously.", color: "#FB923C" },
            4: { nameHi: "‡§Ö‡§µ‡§ø‡§∞‡§§ ‡§∏‡§Æ‡•ç‡§Ø‡§ó‡•ç‡§¶‡•É‡§∑‡•ç‡§ü‡§ø", nameEn: "Avirat Samyagdrishti", english: "Right Belief without Conduct", description: "Soul has right belief but has not yet adopted right conduct.", color: "#FBBF24" },
            5: { nameHi: "‡§¶‡•á‡§∂‡§µ‡§ø‡§∞‡§§", nameEn: "Deshvirat", english: "Partial Vows", description: "Soul adopts partial vows and begins practicing limited self-restraint.", color: "#A3E635" },
            6: { nameHi: "‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§‡§µ‡§ø‡§∞‡§§", nameEn: "Pramattavirat", english: "Careless Conduct", description: "Soul has taken complete vows but is still careless in observance.", color: "#4ADE80" },
            7: { nameHi: "‡§Ö‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§‡§µ‡§ø‡§∞‡§§", nameEn: "Apramattavirat", english: "Careful Conduct", description: "Soul observes vows with complete care and attention.", color: "#10B981" },
            8: { nameHi: "‡§Ö‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï‡§∞‡§£", nameEn: "Apurvakarana", english: "Unprecedented Thought-activity", description: "Soul experiences unprecedented spiritual transformation.", color: "#14B8A6" },
            9: { nameHi: "‡§Ö‡§®‡§ø‡§µ‡•É‡§§‡•ç‡§§‡§ø‡§ï‡§∞‡§£", nameEn: "Anivrittikarana", english: "Subtle Passion", description: "Only subtle forms of passion remain; gross passions eliminated.", color: "#06B6D4" },
            10: { nameHi: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ‡§∏‡§æ‡§Ç‡§™‡§∞‡§æ‡§Ø", nameEn: "Sukshmasamparaya", english: "Subtle Greed", description: "Only the most subtle form of greed (lobha) remains.", color: "#3B82F6" },
            11: { nameHi: "‡§â‡§™‡§∂‡§æ‡§Ç‡§§ ‡§Æ‡•ã‡§π", nameEn: "Upashanta Moha", english: "Subsided Delusion", description: "All deluding karmas are temporarily subsided but not destroyed.", color: "#6366F1" },
            12: { nameHi: "‡§ï‡•ç‡§∑‡•Ä‡§£‡§Æ‡•ã‡§π", nameEn: "Kshina Moha", english: "Destroyed Delusion", description: "All deluding karmas are permanently destroyed. No return to lower stages.", color: "#8B5CF6" },
            13: { nameHi: "‡§∏‡§Ø‡•ã‡§ó‡§ï‡•á‡§µ‡§≤‡•Ä", nameEn: "Sayogakevali", english: "Omniscient with Activity", description: "Soul achieves omniscience but still has bodily activities.", color: "#EC4899" },
            14: { nameHi: "‡§Ö‡§Ø‡•ã‡§ó‡§ï‡•á‡§µ‡§≤‡•Ä", nameEn: "Ayogakevali", english: "Omniscient without Activity", description: "Final stage before liberation. No mental, verbal, or physical activities.", color: "#F59E0B" }
        };

        // Accurate transition rules from main app
        const transitionRules = {
            1: { canGoTo: [3, 4, 5, 7], description: "Can progress to mixed belief, right belief, partial vows, or rarely complete vows" },
            2: { canGoTo: [1], description: "Falls back to false belief" },
            3: { canGoTo: [1, 4], description: "Can fall to false belief or progress to right belief" },
            4: { canGoTo: [1, 2, 3, 5, 7], description: "Multiple paths including direct jump to complete vows" },
            5: { canGoTo: [1, 2, 3, 4, 7], description: "Can fall back or progress to monastic life" },
            6: { canGoTo: [1, 2, 3, 4, 5, 7], description: "Can progress to careful conduct or spiritual ladder" },
            7: { canGoTo: [6, 8], description: "Can become careless or continue ascending" },
            8: { canGoTo: [7, 9], description: "Can fall back or continue ascending" },
            9: { canGoTo: [7, 10], description: "Can fall back or reach subtle greed stage" },
            10: { canGoTo: [7, 11, 12], description: "Can fall, subside, or destroy delusion" },
            11: { canGoTo: [1, 4, 12, 13], description: "Can fall completely, switch paths, or achieve omniscience" },
            12: { canGoTo: [13], description: "Progresses to omniscience" },
            13: { canGoTo: [14], description: "Final transition to liberation" },
            14: { canGoTo: [], description: "Liberation (Moksha) - No further transitions" }
        };

        // Complete game scenarios for all gunasthanas with wrong choices
        const gameScenarios = {
            1: {
                title: "‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§≠‡•ç‡§∞‡§Æ - World of Delusion",
                content: "‡§Ü‡§™ ‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§ï‡•á ‡§≠‡•ç‡§∞‡§Æ ‡§Æ‡•á‡§Ç ‡§´‡§Ç‡§∏‡•á ‡§π‡•Å‡§è ‡§è‡§ï ‡§ú‡•Ä‡§µ ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•ã ‡§∏‡§§‡•ç‡§Ø ‡§î‡§∞ ‡§Ö‡§∏‡§§‡•ç‡§Ø ‡§ï‡§æ ‡§≠‡•á‡§¶ ‡§®‡§π‡•Ä‡§Ç ‡§™‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§ï‡§∞‡•ç‡§Æ‡•ã‡§Ç ‡§∏‡•á ‡§¨‡§Ç‡§ß‡•á ‡§π‡•Å‡§è ‡§π‡•à‡§Ç‡•§",
                scenario: "‡§Ü‡§™ ‡§è‡§ï ‡§Æ‡§Ç‡§¶‡§ø‡§∞ ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§µ‡§π‡§æ‡§Ç ‡§ú‡•à‡§® ‡§Ü‡§ö‡§æ‡§∞‡•ç‡§Ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§µ‡§ö‡§® ‡§∏‡•Å‡§®‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á?",
                choices: [
                    { target: 3, title: "‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞", description: "‡§Ü‡§ö‡§æ‡§∞‡•ç‡§Ø ‡§ï‡•Ä ‡§ï‡•Å‡§õ ‡§¨‡§æ‡§§‡•á‡§Ç ‡§∏‡§π‡•Ä ‡§≤‡§ó‡§§‡•Ä ‡§π‡•à‡§Ç, ‡§ï‡•Å‡§õ ‡§∏‡§Ç‡§¶‡•á‡§π ‡§≠‡•Ä ‡§π‡•à", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -10, ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -5 }, quiz: false },
                    { target: 4, title: "‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ", description: "‡§∏‡§Æ‡•ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§§‡•ç‡§Ø ‡§ï‡•ã ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -25, ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -15 }, quiz: true },
                    { target: 5, title: "‡§µ‡•ç‡§∞‡§§ ‡§∏‡§Ç‡§ï‡§≤‡•ç‡§™", description: "‡§§‡•Å‡§∞‡§Ç‡§§ ‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§µ‡•ç‡§∞‡§§ ‡§≤‡•á‡§®‡•á ‡§ï‡§æ ‡§®‡§ø‡§∂‡•ç‡§ö‡§Ø ‡§ï‡§∞‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -35, ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -20 }, quiz: true },
                    { target: 1, title: "üö´ ‡§Ö‡§π‡§Ç‡§ï‡§æ‡§∞ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø", description: "\"‡§Æ‡•à‡§Ç ‡§§‡•ã ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§π‡•Ä ‡§ß‡§æ‡§∞‡•ç‡§Æ‡§ø‡§ï ‡§π‡•Ç‡§Ç, ‡§Æ‡•Å‡§ù‡•á ‡§∏‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§®‡§π‡•Ä‡§Ç\"", karma: { ‡§∏‡§≠‡•Ä: 20 }, quiz: false },
                    { target: 1, title: "üö´ ‡§≠‡•å‡§§‡§ø‡§ï‡§µ‡§æ‡§¶‡•Ä ‡§∏‡•ã‡§ö", description: "\"‡§Ø‡§π ‡§∏‡§¨ ‡§ï‡§≤‡•ç‡§™‡§®‡§æ ‡§π‡•à, ‡§ï‡•á‡§µ‡§≤ ‡§™‡•à‡§∏‡§æ ‡§î‡§∞ ‡§∏‡•Å‡§ñ ‡§π‡•Ä ‡§∏‡§ö ‡§π‡•à\"", karma: { ‡§∏‡§≠‡•Ä: 25 }, quiz: false },
                    { target: 1, title: "üö´ ‡§§‡§∞‡•ç‡§ï‡§µ‡§æ‡§¶‡•Ä ‡§ñ‡§Ç‡§°‡§®", description: "\"‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•á ‡§Ø‡•Å‡§ó ‡§Æ‡•á‡§Ç ‡§Ø‡§π ‡§∏‡§¨ ‡§Ö‡§Ç‡§ß‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§π‡•à\"", karma: { ‡§∏‡§≠‡•Ä: 30 }, quiz: false }
                ]
            },
            2: {
                title: "‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡§§‡§® - Spiritual Downfall",
                content: "‡§Ü‡§™‡§ï‡§æ ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§ï‡•ç‡§∑‡•Ä‡§£ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§Ö‡§®‡§®‡•ç‡§§‡§æ‡§®‡•Å‡§¨‡§Ç‡§ß‡•Ä ‡§ï‡§∑‡§æ‡§Ø ‡§ï‡§æ ‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§â‡§¶‡§Ø ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§î‡§∞ ‡§ñ‡§§‡§∞‡§®‡§æ‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§π‡•à‡•§",
                scenario: "‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§ï‡•ç‡§∞‡•ã‡§ß, ‡§Æ‡§æ‡§®, ‡§Æ‡§æ‡§Ø‡§æ ‡§Ø‡§æ ‡§≤‡•ã‡§≠ ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§Æ‡•ç‡§Ø‡§ï ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ ‡§°‡§ó‡§Æ‡§ó‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§á‡§∏ ‡§ï‡§†‡§ø‡§® ‡§∏‡§Æ‡§Ø ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á?",
                choices: [
                    { target: 1, title: "‡§ï‡§∑‡§æ‡§Ø ‡§ï‡•á ‡§µ‡§∂‡•Ä‡§≠‡•Ç‡§§", description: "‡§§‡•Ä‡§µ‡•ç‡§∞ ‡§ï‡§∑‡§æ‡§Ø ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§™‡•Ç‡§∞‡•ç‡§£‡§§‡§É ‡§Æ‡§ø‡§•‡•ç‡§Ø‡§æ‡§§‡•ç‡§µ ‡§Æ‡•á‡§Ç ‡§ó‡§ø‡§∞‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 20, ‡§∏‡§≠‡•Ä: 10 }, quiz: false }
                ]
            },
            3: {
                title: "‡§Æ‡§ø‡§∂‡•ç‡§∞‡§ø‡§§ ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ - Mixed Belief",
                content: "‡§Ü‡§™‡§ï‡•á ‡§Æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§§‡•ç‡§Ø ‡§î‡§∞ ‡§Ö‡§∏‡§§‡•ç‡§Ø ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§π ‡§Ö‡§∏‡•ç‡§•‡§ø‡§∞ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§π‡•à ‡§ú‡§π‡§æ‡§Å ‡§∏‡§Ç‡§¶‡•á‡§π ‡§î‡§∞ ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§∏‡§æ‡§• ‡§π‡•à‡§Ç‡•§",
                scenario: "‡§Ü‡§™‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡§§‡§æ ‡§≤‡§æ‡§®‡•Ä ‡§π‡•ã‡§ó‡•Ä‡•§ ‡§ï‡§ø‡§∏ ‡§¶‡§ø‡§∂‡§æ ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?",
                choices: [
                    { target: 4, title: "‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ", description: "‡§∏‡§π‡•Ä ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§™‡§∞ ‡§¶‡•É‡§¢‡§º‡§§‡§æ ‡§∏‡•á ‡§ö‡§≤‡§®‡•á ‡§ï‡§æ ‡§®‡§ø‡§∂‡•ç‡§ö‡§Ø", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -20, ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -10 }, quiz: true },
                    { target: 1, title: "‡§™‡•Å‡§®‡§É ‡§≠‡•ç‡§∞‡§Æ", description: "‡§∏‡§Ç‡§¶‡•á‡§π ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§ó‡§≤‡§§ ‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§≤‡•å‡§ü‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 15, ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: 10 }, quiz: false },
                    { target: 1, title: "üö´ ‡§¶‡•ç‡§µ‡§ø‡§ß‡§æ ‡§Æ‡•á‡§Ç ‡§´‡§Ç‡§∏‡§®‡§æ", description: "\"‡§∏‡§¨ ‡§ß‡§∞‡•ç‡§Æ ‡§è‡§ï ‡§ú‡•à‡§∏‡•á ‡§π‡•à‡§Ç, ‡§ï‡•ã‡§à ‡§´‡§∞‡•ç‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à\"", karma: { ‡§∏‡§≠‡•Ä: 15 }, quiz: false },
                    { target: 1, title: "üö´ ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§≠‡•ç‡§∞‡§Æ", description: "\"‡§•‡•ã‡§°‡§º‡§æ ‡§∏‡§ö ‡§•‡•ã‡§°‡§º‡§æ ‡§ù‡•Ç‡§† ‡§Æ‡§ø‡§≤‡§æ‡§ï‡§∞ ‡§ö‡§≤‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è\"", karma: { ‡§∏‡§≠‡•Ä: 18 }, quiz: false }
                ]
            },
            4: {
                title: "‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§ï‡•Ä ‡§â‡§ú‡§æ‡§∏ - Light of Right Belief",
                content: "‡§∂‡•Å‡§≠ ‡§π‡•ã! ‡§Ü‡§™‡§®‡•á ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞ ‡§≤‡§ø‡§Ø‡§æ ‡§π‡•à‡•§ ‡§Ö‡§¨ ‡§Ü‡§™ ‡§∏‡§§‡•ç‡§Ø ‡§ï‡•ã ‡§ú‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç, ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ö‡§≠‡•Ä ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Ö‡§™‡§®‡§æ‡§Ø‡§æ ‡§π‡•à‡•§",
                scenario: "‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§ó‡§≤‡§æ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡§¶‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?",
                choices: [
                    { target: 5, title: "‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§µ‡•ç‡§∞‡§§ ‡§ß‡§æ‡§∞‡§£", description: "‡§ó‡•É‡§π‡§∏‡•ç‡§• ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§µ‡•ç‡§∞‡§§ ‡§≤‡•á‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -15, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: -10 }, quiz: true },
                    { target: 7, title: "‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§Ç‡§Ø‡§Æ", description: "‡§∏‡•Ä‡§ß‡•á ‡§Æ‡•Å‡§®‡§ø ‡§¶‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§≤‡•á‡§®‡§æ (‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§¶‡•Å‡§∞‡•ç‡§≤‡§≠)", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -40, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: -30 }, quiz: true },
                    { target: 2, title: "‡§ï‡§∑‡§æ‡§Ø ‡§â‡§¶‡§Ø", description: "‡§Ö‡§®‡§®‡•ç‡§§‡§æ‡§®‡•Å‡§¨‡§Ç‡§ß‡•Ä ‡§ï‡§∑‡§æ‡§Ø ‡§ï‡•á ‡§â‡§¶‡§Ø ‡§∏‡•á ‡§Ö‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§™‡§§‡§®", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 20, ‡§∏‡§≠‡•Ä: 10 }, quiz: false },
                    { target: 3, title: "‡§∏‡§Ç‡§¶‡•á‡§π ‡§Ü‡§ó‡§Æ‡§®", description: "‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ ‡§Æ‡•á‡§Ç ‡§•‡•ã‡§°‡§º‡§æ ‡§∏‡§Ç‡§¶‡•á‡§π ‡§Ü‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 10, ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: 5 }, quiz: false },
                    { target: 1, title: "üö´ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§¶ ‡§µ‡§ø‡§∑‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç", description: "\"‡§Ö‡§¨ ‡§§‡•ã ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ, ‡§Ö‡§¨ ‡§Æ‡•å‡§ú ‡§ï‡§∞‡§ï‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§¨‡§ø‡§ó‡§°‡§º‡•á‡§ó‡§æ\"", karma: { ‡§∏‡§≠‡•Ä: 25 }, quiz: false },
                    { target: 1, title: "üö´ ‡§∂‡•ç‡§∞‡•á‡§∑‡•ç‡§†‡§§‡§æ ‡§ï‡§æ ‡§ó‡§∞‡•ç‡§µ", description: "\"‡§Æ‡•à‡§Ç ‡§§‡•ã ‡§∏‡§Æ‡•ç‡§Ø‡§ó‡•ç‡§¶‡•É‡§∑‡•ç‡§ü‡§ø ‡§π‡•Ç‡§Ç, ‡§Æ‡•à‡§Ç ‡§¶‡•Ç‡§∏‡§∞‡•ã‡§Ç ‡§∏‡•á ‡§∂‡•ç‡§∞‡•á‡§∑‡•ç‡§† ‡§π‡•Ç‡§Ç\"", karma: { ‡§∏‡§≠‡•Ä: 30 }, quiz: false },
                    { target: 1, title: "üö´ ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§â‡§™‡•á‡§ï‡•ç‡§∑‡§æ", description: "\"‡§ï‡•á‡§µ‡§≤ ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ ‡§ï‡§æ‡§´‡•Ä ‡§π‡•à, ‡§Ü‡§ö‡§∞‡§£ ‡§ï‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§®‡§π‡•Ä‡§Ç\"", karma: { ‡§∏‡§≠‡•Ä: 35 }, quiz: false }
                ]
            },
            5: {
                title: "‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§µ‡•ç‡§∞‡§§ - Partial Vows",
                content: "‡§Ü‡§™‡§®‡•á ‡§∂‡•ç‡§∞‡§æ‡§µ‡§ï ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§∂‡§µ‡§ø‡§∞‡§§ ‡§µ‡•ç‡§∞‡§§ ‡§≤‡•á ‡§≤‡§ø‡§è ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™ ‡§Ö‡§π‡§ø‡§Ç‡§∏‡§æ, ‡§∏‡§§‡•ç‡§Ø ‡§Ü‡§¶‡§ø ‡§ï‡§æ ‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§™‡§æ‡§≤‡§® ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§",
                scenario: "‡§ó‡•É‡§π‡§∏‡•ç‡§• ‡§ú‡•Ä‡§µ‡§® ‡§Æ‡•á‡§Ç ‡§ß‡§∞‡•ç‡§Æ ‡§î‡§∞ ‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§∏‡§Ç‡§§‡•Å‡§≤‡§® ‡§¨‡§®‡§æ‡§®‡§æ ‡§™‡§°‡§º ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§Ü‡§ó‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á?",
                choices: [
                    { target: 7, title: "‡§Æ‡•Å‡§®‡§ø ‡§¶‡•Ä‡§ï‡•ç‡§∑‡§æ", description: "‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§Ç‡§Ø‡§Æ ‡§Ö‡§™‡§®‡§æ‡§ï‡§∞ ‡§Æ‡•Å‡§®‡§ø ‡§¨‡§®‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -25, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: -20 }, quiz: true },
                    { target: 4, title: "‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ ‡§∏‡•Å‡§¶‡•É‡§¢‡§º‡•Ä‡§ï‡§∞‡§£", description: "‡§™‡§π‡§≤‡•á ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§ï‡•ã ‡§î‡§∞ ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§¨‡§®‡§æ‡§®‡§æ", karma: { ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -10 }, quiz: false },
                    { target: 2, title: "‡§µ‡•ç‡§∞‡§§ ‡§≠‡§Ç‡§ó", description: "‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§µ‡•ç‡§∞‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§≤‡•ç‡§≤‡§Ç‡§ò‡§® ‡§ï‡§∞‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 15, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: 10 }, quiz: false },
                    { target: 3, title: "‡§ß‡§∞‡•ç‡§Æ ‡§∏‡§Ç‡§¶‡•á‡§π", description: "‡§µ‡•ç‡§∞‡§§‡•ã‡§Ç ‡§ï‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó‡§ø‡§§‡§æ ‡§™‡§∞ ‡§∏‡§Ç‡§¶‡•á‡§π ‡§Ü‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 5 }, quiz: false },
                    { target: 1, title: "üö´ ‡§µ‡•ç‡§∞‡§§ ‡§¶‡§ø‡§ñ‡§æ‡§µ‡§æ", description: "\"‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§Æ‡§®‡•á ‡§ß‡§æ‡§∞‡•ç‡§Æ‡§ø‡§ï ‡§¶‡§ø‡§ñ‡§®‡§æ ‡§π‡•à, ‡§Æ‡§® ‡§∏‡•á ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§®‡§π‡•Ä‡§Ç\"", karma: { ‡§∏‡§≠‡•Ä: 20 }, quiz: false },
                    { target: 1, title: "üö´ ‡§ß‡§® ‡§ï‡§æ ‡§Æ‡•ã‡§π", description: "\"‡§ß‡§Ç‡§ß‡•á ‡§Æ‡•á‡§Ç ‡§ù‡•Ç‡§†-‡§´‡§∞‡•á‡§¨ ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à, ‡§ß‡§∞‡•ç‡§Æ ‡§Ö‡§≤‡§ó ‡§ö‡•Ä‡§ú ‡§π‡•à\"", karma: { ‡§∏‡§≠‡•Ä: 25 }, quiz: false },
                    { target: 1, title: "üö´ ‡§™‡§æ‡§∞‡§ø‡§µ‡§æ‡§∞‡§ø‡§ï ‡§¶‡§¨‡§æ‡§µ", description: "\"‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ñ‡•Å‡§∂ ‡§∞‡§ñ‡§®‡§æ ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à, ‡§µ‡•ç‡§∞‡§§ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç‡§ó‡•á\"", karma: { ‡§∏‡§≠‡•Ä: 22 }, quiz: false }
                ]
            },
            6: {
                title: "‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§ ‡§µ‡§ø‡§∞‡§§‡§ø - Careless Monastic Life",
                content: "‡§Ü‡§™‡§®‡•á ‡§¶‡§ø‡§ó‡§Ç‡§¨‡§∞ ‡§Æ‡•Å‡§®‡§ø ‡§ï‡•Ä ‡§¶‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§≤‡•á ‡§≤‡•Ä ‡§π‡•à‡•§ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§Ç‡§Ø‡§Æ ‡§π‡•à ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä ‡§™‡•ç‡§∞‡§Æ‡§æ‡§¶ (‡§≤‡§æ‡§™‡§∞‡§µ‡§æ‡§π‡•Ä) ‡§π‡•à‡•§",
                scenario: "‡§Æ‡•Å‡§®‡§ø ‡§ú‡•Ä‡§µ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§æ‡§ß‡§®‡§æ ‡§î‡§∞ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§≤‡•á‡§ï‡§ø‡§® ‡§ï‡§≠‡•Ä-‡§ï‡§≠‡•Ä ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§≠‡§ü‡§ï‡§§‡§æ ‡§π‡•à‡•§",
                choices: [
                    { target: 7, title: "‡§Ö‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§‡§§‡§æ", description: "‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§µ‡•ç‡§∞‡§§‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§æ‡§≤‡§®", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -15, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: -15 }, quiz: true },
                    { target: 8, title: "‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•Ä‡§¢‡§º‡•Ä", description: "‡§∂‡•Å‡§ï‡•ç‡§≤‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§â‡§ö‡•ç‡§ö ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -30, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: -25 }, quiz: true },
                    { target: 5, title: "‡§ó‡•É‡§π‡§∏‡•ç‡§• ‡§µ‡§æ‡§™‡§∏‡•Ä", description: "‡§Æ‡•Å‡§®‡§ø ‡§ú‡•Ä‡§µ‡§® ‡§ï‡•Ä ‡§ï‡§†‡§ø‡§®‡§æ‡§à ‡§∏‡•á ‡§ò‡§¨‡§∞‡§æ‡§ï‡§∞ ‡§≤‡•å‡§ü‡§®‡§æ", karma: { ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: 20 }, quiz: false },
                    { target: 4, title: "‡§µ‡•ç‡§∞‡§§ ‡§§‡•ç‡§Ø‡§æ‡§ó", description: "‡§∏‡§Ç‡§Ø‡§Æ ‡§õ‡•ã‡§°‡§º‡§ï‡§∞ ‡§ï‡•á‡§µ‡§≤ ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§∞‡§ñ‡§®‡§æ", karma: { ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: 25 }, quiz: false },
                    { target: 1, title: "üö´ ‡§≤‡•ã‡§ï ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§® ‡§ï‡§æ ‡§Æ‡•ã‡§π", description: "\"‡§≤‡•ã‡§ó ‡§Æ‡•Å‡§ù‡•á ‡§Æ‡§π‡§æ‡§® ‡§Æ‡•Å‡§®‡§ø ‡§Æ‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç, ‡§Ø‡§π ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§≤‡§ó‡§§‡§æ ‡§π‡•à\"", karma: { ‡§∏‡§≠‡•Ä: 30 }, quiz: false },
                    { target: 1, title: "üö´ ‡§∂‡§ø‡§∑‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§ó‡§∞‡•ç‡§µ", description: "\"‡§Æ‡•á‡§∞‡•á ‡§™‡§æ‡§∏ ‡§á‡§§‡§®‡•á ‡§∂‡§ø‡§∑‡•ç‡§Ø ‡§π‡•à‡§Ç, ‡§Æ‡•à‡§Ç ‡§¨‡§°‡§º‡§æ ‡§ó‡•Å‡§∞‡•Å ‡§π‡•Ç‡§Ç\"", karma: { ‡§∏‡§≠‡•Ä: 35 }, quiz: false },
                    { target: 1, title: "üö´ ‡§ö‡§Æ‡§§‡•ç‡§ï‡§æ‡§∞‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø ‡§ï‡§æ ‡§¶‡•Å‡§∞‡•Å‡§™‡§Ø‡•ã‡§ó", description: "‡§Ö‡§µ‡§ß‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§Ø‡§æ ‡§ã‡§¶‡•ç‡§ß‡§ø ‡§ï‡§æ ‡§ó‡§≤‡§§ ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ", karma: { ‡§∏‡§≠‡•Ä: 40 }, quiz: false }
                ]
            },
            7: {
                title: "‡§Ö‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§ ‡§µ‡§ø‡§∞‡§§‡§ø - Careful Monastic Conduct",
                content: "‡§Ö‡§¨ ‡§Ü‡§™ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Æ‡•Å‡§®‡§ø ‡§ß‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§™‡§æ‡§≤‡§® ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§¶ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‚è∞ ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®: ‡§Ö‡§¨ ‡§Æ‡§∞‡§£‡§ï‡§æ‡§≤ ‡§ï‡•Ä ‡§∏‡§Æ‡§Ø ‡§∏‡•Ä‡§Æ‡§æ ‡§∂‡•Å‡§∞‡•Ç!",
                scenario: "‡§®‡§ø‡§∞‡•ç‡§Æ‡§≤ ‡§∏‡§æ‡§ß‡§®‡§æ ‡§î‡§∞ ‡§ó‡§π‡§® ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§∏‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§§‡•ç‡§Æ‡§æ ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§Ö‡§ó‡§≤‡§æ ‡§ï‡§¶‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?",
                choices: [
                    { target: 8, title: "‡§∂‡•Å‡§ï‡•ç‡§≤‡§ß‡•ç‡§Ø‡§æ‡§® ‡§™‡•ç‡§∞‡§µ‡•á‡§∂", description: "‡§Ö‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï‡§∞‡§£ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•Ä‡§¢‡§º‡•Ä ‡§Ü‡§∞‡§Ç‡§≠", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -25, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: -20 }, quiz: true },
                    { target: 6, title: "‡§™‡•ç‡§∞‡§Æ‡§æ‡§¶ ‡§™‡•Å‡§®‡§∞‡§æ‡§ó‡§Æ‡§®", description: "‡§´‡§ø‡§∞ ‡§∏‡•á ‡§•‡•ã‡§°‡§º‡•Ä ‡§≤‡§æ‡§™‡§∞‡§µ‡§æ‡§π‡•Ä ‡§Ü‡§®‡§æ", karma: { ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: 10 }, quiz: false },
                    { target: 1, title: "üö´ ‡§ã‡§¶‡•ç‡§ß‡§ø ‡§ï‡§æ ‡§¶‡•Å‡§∞‡•Å‡§™‡§Ø‡•ã‡§ó", description: "\"‡§Æ‡•à‡§Ç ‡§ö‡§Æ‡§§‡•ç‡§ï‡§æ‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§ï‡§∞ ‡§™‡•ç‡§∞‡§∏‡§ø‡§¶‡•ç‡§ß ‡§¨‡§®‡•Ç‡§Ç‡§ó‡§æ\"", karma: { ‡§∏‡§≠‡•Ä: 45 }, quiz: false },
                    { target: 1, title: "üö´ ‡§∏‡§æ‡§ß‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§Ö‡§π‡§Ç‡§ï‡§æ‡§∞", description: "\"‡§Æ‡•à‡§Ç ‡§ï‡§ø‡§§‡§®‡§æ ‡§Æ‡§π‡§æ‡§® ‡§∏‡§æ‡§ß‡§ï ‡§π‡•Ç‡§Ç, ‡§ï‡•ã‡§à ‡§Æ‡•á‡§∞‡•á ‡§ú‡•à‡§∏‡§æ ‡§®‡§π‡•Ä‡§Ç\"", karma: { ‡§∏‡§≠‡•Ä: 40 }, quiz: false }
                ]
            },
            8: {
                title: "‡§Ö‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï‡§∞‡§£ - Unprecedented Spiritual Activity",
                content: "‡§∂‡•Å‡§ï‡•ç‡§≤‡§ß‡•ç‡§Ø‡§æ‡§® ‡§ï‡•Ä ‡§™‡§π‡§≤‡•Ä ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä! ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•Ä‡§¢‡§º‡•Ä ‡§™‡§∞ ‡§Ü‡§∞‡•ã‡§π‡§£ ‡§∂‡•Å‡§∞‡•Ç‡•§ ‡§Ö‡§≠‡•Ç‡§§‡§™‡•Ç‡§∞‡•ç‡§µ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‚è∞ ‡§∏‡§Æ‡§Ø ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§¨‡•Ä‡§§ ‡§∞‡§π‡§æ ‡§π‡•à!",
                scenario: "‡§∂‡•Å‡§ï‡•ç‡§≤‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§ø‡§∞ ‡§π‡•ã‡§ï‡§∞ ‡§Ü‡§™ ‡§ï‡§∞‡•ç‡§Æ‡•ã‡§Ç ‡§ï‡§æ ‡§ï‡•ç‡§∑‡§Ø ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§π ‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§®‡§æ‡§ú‡•Å‡§ï ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ ‡§π‡•à‡•§",
                choices: [
                    { target: 9, title: "‡§Ö‡§®‡§ø‡§µ‡•É‡§§‡•ç‡§§‡§ø‡§ï‡§∞‡§£ ‡§™‡•ç‡§∞‡§µ‡•á‡§∂", description: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§ï‡§∑‡§æ‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§æ‡§∂ ‡§∂‡•Å‡§∞‡•Ç", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -30, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: -25 }, quiz: true },
                    { target: 7, title: "‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§≠‡•ç‡§∞‡§∑‡•ç‡§ü", description: "‡§ß‡•ç‡§Ø‡§æ‡§® ‡§≠‡§Ç‡§ó ‡§π‡•ã‡§ï‡§∞ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•Ä‡§¢‡§º‡•Ä ‡§∏‡•á ‡§ó‡§ø‡§∞‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 10 }, quiz: false },
                    { target: 4, title: "üö´ ‡§Æ‡§∞‡§£ ‡§ï‡§æ ‡§≠‡§Ø", description: "‡§Æ‡§∞‡§£ ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§≠‡§Ø‡§≠‡•Ä‡§§ ‡§π‡•ã‡§ï‡§∞ ‡§ó‡§ø‡§∞‡§®‡§æ", karma: { ‡§∏‡§≠‡•Ä: 20 }, quiz: false },
                    { target: 1, title: "üö´ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ó‡§∞‡•ç‡§µ", description: "\"‡§Æ‡•à‡§Ç ‡§∂‡•Å‡§ï‡•ç‡§≤‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§π‡•Ç‡§Ç, ‡§ï‡§ø‡§§‡§®‡§æ ‡§Æ‡§π‡§æ‡§® ‡§π‡•Ç‡§Ç\"", karma: { ‡§∏‡§≠‡•Ä: 50 }, quiz: false }
                ]
            },
            9: {
                title: "‡§Ö‡§®‡§ø‡§µ‡•É‡§§‡•ç‡§§‡§ø‡§ï‡§∞‡§£ - Subtle Passion Stage",
                content: "‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø ‡§∂‡•Å‡§ï‡•ç‡§≤‡§ß‡•ç‡§Ø‡§æ‡§®! ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§ï‡§∑‡§æ‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§æ‡§∂ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§∏‡§Ç‡§ú‡•ç‡§µ‡§≤‡§® ‡§Æ‡§æ‡§Ø‡§æ ‡§®‡§∑‡•ç‡§ü! ‚è∞ ‡§∏‡§Æ‡§Ø ‡§î‡§∞ ‡§≠‡•Ä ‡§ï‡§Æ ‡§¨‡§ö‡§æ ‡§π‡•à!",
                scenario: "‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§∏‡•ç‡§§‡§∞ ‡§™‡§∞ ‡§™‡§π‡•Å‡§Ç‡§ö‡§ï‡§∞ ‡§Ü‡§™ ‡§ï‡§∞‡•ç‡§Æ ‡§®‡§æ‡§∂ ‡§Æ‡•á‡§Ç ‡§≤‡§ó‡•á ‡§π‡•à‡§Ç‡•§",
                choices: [
                    { target: 10, title: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ‡§∏‡§æ‡§Ç‡§™‡§∞‡§æ‡§Ø ‡§™‡•ç‡§∞‡§µ‡•á‡§∂", description: "‡§ï‡•á‡§µ‡§≤ ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§≤‡•ã‡§≠ ‡§ï‡§æ ‡§¨‡§ö‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -35, ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞: -30 }, quiz: true },
                    { target: 7, title: "‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§≠‡•ç‡§∞‡§∑‡•ç‡§ü", description: "‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ‡§§‡§æ ‡§∏‡•á ‡§ò‡§¨‡§∞‡§æ‡§ï‡§∞ ‡§ó‡§ø‡§∞‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 15 }, quiz: false },
                    { target: 4, title: "üö´ ‡§Æ‡§∞‡§£ ‡§≠‡§Ø", description: "‡§Æ‡§∞‡§£ ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§Ö‡§§‡§ø ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§≠‡§Ø ‡§∏‡•á ‡§ó‡§ø‡§∞‡§®‡§æ", karma: { ‡§∏‡§≠‡•Ä: 25 }, quiz: false }
                ]
            },
            10: {
                title: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ‡§∏‡§æ‡§Ç‡§™‡§∞‡§æ‡§Ø - Subtle Greed",
                content: "‡§§‡•É‡§§‡•Ä‡§Ø ‡§∂‡•Å‡§ï‡•ç‡§≤‡§ß‡•ç‡§Ø‡§æ‡§®! ‡§ï‡•á‡§µ‡§≤ ‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§≤‡•ã‡§≠ ‡§ï‡§∑‡§æ‡§Ø ‡§¨‡§ö‡•Ä ‡§π‡•à‡•§ ‡§Ö‡§¨ ‡§¶‡•ã ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§π‡•à‡§Ç! ‚è∞ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ï‡•ç‡§∑‡§£ ‡§®‡§ø‡§ï‡§ü!",
                scenario: "‡§∏‡§¨‡§∏‡•á ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§ï‡§æ ‡§∏‡§Æ‡§Ø - ‡§â‡§™‡§∂‡§Æ ‡§Ø‡§æ ‡§ï‡•ç‡§∑‡§™‡§ï ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä?",
                choices: [
                    { target: 11, title: "‡§â‡§™‡§∂‡§Æ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä", description: "‡§Æ‡•ã‡§π ‡§ï‡§æ ‡§Ö‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§â‡§™‡§∂‡§Æ (‡§ñ‡§§‡§∞‡§®‡§æ‡§ï ‡§≤‡•á‡§ï‡§ø‡§® ‡§§‡•ç‡§µ‡§∞‡§ø‡§§)", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -40 }, quiz: true },
                    { target: 12, title: "‡§ï‡•ç‡§∑‡§™‡§ï ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä", description: "‡§Æ‡•ã‡§π ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§®‡§æ‡§∂ (‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§≤‡•á‡§ï‡§ø‡§® ‡§ß‡•Ä‡§Æ‡§æ)", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -50 }, quiz: true },
                    { target: 7, title: "‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§≠‡•ç‡§∞‡§∑‡•ç‡§ü", description: "‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ï‡•ç‡§∑‡§£ ‡§Æ‡•á‡§Ç ‡§ó‡§ø‡§∞‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 20 }, quiz: false },
                    { target: 4, title: "üö´ ‡§Æ‡•É‡§§‡•ç‡§Ø‡•Å ‡§≠‡§Ø", description: "‡§Æ‡§∞‡§£ ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§≤‡•ã‡§≠ ‡§∏‡•á ‡§ó‡§ø‡§∞‡§®‡§æ", karma: { ‡§∏‡§≠‡•Ä: 30 }, quiz: false }
                ]
            },
            11: {
                title: "‡§â‡§™‡§∂‡§æ‡§Ç‡§§ ‡§Æ‡•ã‡§π - Subsided Delusion",
                content: "‡§â‡§™‡§∂‡§Æ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§∏‡§´‡§≤! ‡§∏‡§≠‡•Ä ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø ‡§ï‡§∞‡•ç‡§Æ ‡§â‡§™‡§∂‡§Æ ‡§Æ‡•á‡§Ç‡•§ ‡§ñ‡§§‡§∞‡§®‡§æ‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø - ‡§ï‡§≠‡•Ä ‡§≠‡•Ä ‡§ü‡•Ç‡§ü ‡§∏‡§ï‡§§‡§æ ‡§π‡•à! ‚è∞ ‡§¨‡§π‡•Å‡§§ ‡§ï‡§Æ ‡§∏‡§Æ‡§Ø!",
                scenario: "‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§®‡§æ‡§ú‡•Å‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§π‡•à‡§Ç‡•§ ‡§â‡§™‡§∂‡§Æ ‡§ü‡•Ç‡§ü ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§Ø‡§æ ‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§Æ‡§ø‡§≤ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§",
                choices: [
                    { target: 12, title: "‡§ï‡•ç‡§∑‡§æ‡§Ø‡§ø‡§ï ‡§Æ‡§æ‡§∞‡•ç‡§ó", description: "‡§â‡§™‡§∂‡§Æ ‡§∏‡•á ‡§ï‡•ç‡§∑‡§™‡§ï ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§æ‡§®‡§æ‡§Ç‡§§‡§∞‡§£", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: -45 }, quiz: true },
                    { target: 13, title: "‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§®", description: "‡§∏‡•Ä‡§ß‡•á ‡§∏‡§∞‡•ç‡§µ‡§ú‡•ç‡§û‡§§‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø (‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§¶‡•Å‡§∞‡•ç‡§≤‡§≠)", karma: { ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -50, ‡§¶‡§∞‡•ç‡§∂‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -50 }, quiz: true },
                    { target: 4, title: "‡§â‡§™‡§∂‡§Æ ‡§≠‡§Ç‡§ó", description: "‡§â‡§™‡§∂‡§Æ ‡§ü‡•Ç‡§ü‡§ï‡§∞ ‡§ï‡•ç‡§∑‡§Ø‡•ã‡§™‡§∂‡§Æ ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§Æ‡•á‡§Ç ‡§Ü‡§®‡§æ", karma: { ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 20 }, quiz: false },
                    { target: 1, title: "üö´ ‡§Æ‡§π‡§æ‡§® ‡§™‡§§‡§®", description: "‡§â‡§™‡§∂‡§Æ ‡§ï‡•á ‡§ü‡•Ç‡§ü‡§®‡•á ‡§∏‡•á ‡§™‡•ç‡§∞‡§•‡§Æ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ó‡§ø‡§∞‡§®‡§æ", karma: { ‡§∏‡§≠‡•Ä: 40 }, quiz: false }
                ]
            },
            12: {
                title: "‡§ï‡•ç‡§∑‡•Ä‡§£‡§Æ‡•ã‡§π - Destroyed Delusion",
                content: "‡§ï‡•ç‡§∑‡§™‡§ï ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§∏‡§´‡§≤! ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø ‡§ï‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§®‡§æ‡§∂! ‡§Ö‡§¨ ‡§ï‡•ã‡§à ‡§µ‡§æ‡§™‡§∏‡•Ä ‡§®‡§π‡•Ä‡§Ç‡•§ ‚è∞ ‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§®‡§ø‡§ï‡§ü!",
                scenario: "‡§Æ‡•ã‡§π ‡§∞‡§π‡§ø‡§§ ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ ‡§Æ‡•á‡§Ç ‡§ï‡•á‡§µ‡§≤ ‡§ò‡§æ‡§§‡§ø‡§Ø‡§æ ‡§ï‡§∞‡•ç‡§Æ‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§æ‡§∂ ‡§¨‡§æ‡§ï‡•Ä ‡§π‡•à‡•§",
                choices: [
                    { target: 13, title: "‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø", description: "‡§ö‡§æ‡§∞ ‡§ò‡§æ‡§§‡§ø‡§Ø‡§æ ‡§ï‡§∞‡•ç‡§Æ‡•ã‡§Ç ‡§ï‡§æ ‡§è‡§ï ‡§∏‡§æ‡§• ‡§®‡§æ‡§∂", karma: { ‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -50, ‡§¶‡§∞‡•ç‡§∂‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø: -50, ‡§Ö‡§®‡•ç‡§§‡§∞‡§æ‡§Ø: -50 }, quiz: true }
                ]
            },
            13: {
                title: "‡§∏‡§Ø‡•ã‡§ó‡§ï‡•á‡§µ‡§≤‡•Ä - Omniscient with Activity",
                content: "‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§! ‡§Ü‡§™ ‡§∏‡§∞‡•ç‡§µ‡§ú‡•ç‡§û ‡§π‡•à‡§Ç! ‡§¶‡§ø‡§µ‡•ç‡§Ø‡§ß‡•ç‡§µ‡§®‡§ø ‡§®‡§ø‡§ï‡§≤ ‡§∞‡§π‡•Ä ‡§π‡•à! ‚è∞ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ï‡•ç‡§∑‡§£!",
                scenario: "‡§Ü‡§™ ‡§∏‡§∞‡•ç‡§µ‡§ú‡•ç‡§û ‡§π‡•ã‡§ï‡§∞ ‡§ú‡§ó‡§§ ‡§ï‡§æ ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§¨ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ö‡§∞‡§£‡•§",
                choices: [
                    { target: 14, title: "‡§Ö‡§Ø‡•ã‡§ó‡§ï‡•á‡§µ‡§≤‡•Ä", description: "‡§∏‡§≠‡•Ä ‡§Ø‡•ã‡§ó ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§ï‡§∞ ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§ï‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä", karma: {}, quiz: false }
                ]
            },
            14: {
                title: "‡§Ö‡§Ø‡•ã‡§ó‡§ï‡•á‡§µ‡§≤‡•Ä - Omniscient without Activity",
                content: "‡§∏‡§≠‡•Ä ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Ç ‡§¨‡§Ç‡§¶‡•§ ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞ ‡§™‡§∞! ‡§ï‡•á‡§µ‡§≤ ‡§Ü‡§Ø‡•Å‡§ï‡§∞‡•ç‡§Æ ‡§¨‡§æ‡§ï‡•Ä!",
                scenario: "‡§Ö‡§Ç‡§§‡§ø‡§Æ 5 ‡§∏‡§Æ‡§Ø... ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§!",
                choices: [
                    { target: "moksha", title: "üïâÔ∏è ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø", description: "‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§ö‡§ï‡•ç‡§∞ ‡§∏‡•á ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§Æ‡•Å‡§ï‡•ç‡§§‡§ø", karma: {}, quiz: false }
                ]
            }
        };

        // Comprehensive quiz questions
        const quizQuestions = {
            3: [
                {
                    question: "‡§Æ‡§ø‡§∂‡•ç‡§∞ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ú‡•Ä‡§µ ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•à‡§∏‡•Ä ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?",
                    options: ["‡§ï‡•á‡§µ‡§≤ ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ", "‡§ï‡•á‡§µ‡§≤ ‡§Æ‡§ø‡§•‡•ç‡§Ø‡§æ‡§§‡•ç‡§µ", "‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§î‡§∞ ‡§Æ‡§ø‡§•‡•ç‡§Ø‡§æ‡§§‡•ç‡§µ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§è‡§ï ‡§∏‡§æ‡§•", "‡§ï‡•ã‡§à ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ ‡§®‡§π‡•Ä‡§Ç"],
                    correct: 2
                },
                {
                    question: "‡§Æ‡§ø‡§∂‡•ç‡§∞ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á ‡§ï‡•å‡§® ‡§∏‡•á ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç?",
                    options: ["‡§ï‡•á‡§µ‡§≤ ‡§™‡•ç‡§∞‡§•‡§Æ ‡§Æ‡•á‡§Ç", "‡§ï‡•á‡§µ‡§≤ ‡§ö‡§§‡•Å‡§∞‡•ç‡§• ‡§Æ‡•á‡§Ç", "‡§™‡•ç‡§∞‡§•‡§Æ ‡§î‡§∞ ‡§ö‡§§‡•Å‡§∞‡•ç‡§• ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç", "‡§∏‡§≠‡•Ä ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç"],
                    correct: 2
                }
            ],
            4: [
                {
                    question: "‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§¨‡§∏‡•á ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    options: ["‡§ß‡§®-‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø", "‡§∏‡§æ‡§§ ‡§§‡§§‡•ç‡§µ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ", "‡§ï‡•á‡§µ‡§≤ ‡§§‡§™ ‡§ï‡§∞‡§®‡§æ", "‡§∏‡§ø‡§∞‡•ç‡§´ ‡§™‡•Ç‡§ú‡§æ-‡§™‡§æ‡§†"],
                    correct: 1
                },
                {
                    question: "‡§ö‡§§‡•Å‡§∞‡•ç‡§• ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ú‡•Ä‡§µ ‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    options: ["‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§î‡§∞ ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞ ‡§¶‡•ã‡§®‡•ã‡§Ç", "‡§ï‡•á‡§µ‡§≤ ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ", "‡§ï‡•á‡§µ‡§≤ ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞", "‡§® ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§® ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞"],
                    correct: 1
                }
            ],
            5: [
                {
                    question: "‡§¶‡•á‡§∂‡§µ‡§ø‡§∞‡§§ ‡§ï‡§æ ‡§Ö‡§∞‡•ç‡§• ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    options: ["‡§™‡•Ç‡§∞‡•ç‡§£ ‡§§‡•ç‡§Ø‡§æ‡§ó", "‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§µ‡•ç‡§∞‡§§", "‡§ï‡•á‡§µ‡§≤ ‡§ß‡•ç‡§Ø‡§æ‡§®", "‡§§‡•Ä‡§∞‡•ç‡§•‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ"],
                    correct: 1
                },
                {
                    question: "‡§™‡§Ç‡§ö‡§Æ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§∞‡§π ‡§∏‡§ï‡§§‡§æ ‡§π‡•à?",
                    options: ["‡§ï‡•á‡§µ‡§≤ ‡§Æ‡•Å‡§®‡§ø", "‡§ï‡•á‡§µ‡§≤ ‡§ó‡•É‡§π‡§∏‡•ç‡§•", "‡§¶‡•ã‡§®‡•ã‡§Ç", "‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"],
                    correct: 1
                }
            ],
            6: [
                {
                    question: "‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§‡§µ‡§ø‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§Æ‡§æ‡§¶ ‡§ï‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§Ö‡§∞‡•ç‡§• ‡§π‡•à?",
                    options: ["‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä", "‡§≤‡§æ‡§™‡§∞‡§µ‡§æ‡§π‡•Ä", "‡§Ö‡§ú‡•ç‡§û‡§æ‡§®‡§§‡§æ", "‡§ó‡•Å‡§∏‡•ç‡§∏‡§æ"],
                    correct: 1
                },
                {
                    question: "‡§õ‡§†‡§µ‡•á‡§Ç ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§Æ‡•Å‡§®‡§ø ‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    options: ["‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä", "‡§ï‡•Å‡§õ ‡§≤‡§æ‡§™‡§∞‡§µ‡§æ‡§π‡•Ä", "‡§ï‡•ã‡§à ‡§µ‡•ç‡§∞‡§§ ‡§®‡§π‡•Ä‡§Ç", "‡§ï‡•á‡§µ‡§≤ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§®"],
                    correct: 1
                }
            ],
            7: [
                {
                    question: "‡§Ö‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§ ‡§µ‡§ø‡§∞‡§§ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    options: ["‡§≤‡§æ‡§™‡§∞‡§µ‡§æ‡§π ‡§Ü‡§ö‡§∞‡§£", "‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§Ü‡§ö‡§∞‡§£", "‡§ï‡•ã‡§à ‡§Ü‡§ö‡§∞‡§£ ‡§®‡§π‡•Ä‡§Ç", "‡§Æ‡§ø‡§∂‡•ç‡§∞‡§ø‡§§ ‡§Ü‡§ö‡§∞‡§£"],
                    correct: 1
                },
                {
                    question: "‡§∏‡§æ‡§§‡§µ‡•á‡§Ç ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á ‡§ï‡§π‡§æ‡§Å ‡§ú‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç?",
                    options: ["‡§ï‡•á‡§µ‡§≤ ‡§õ‡§†‡§µ‡•á‡§Ç ‡§Æ‡•á‡§Ç", "‡§ï‡•á‡§µ‡§≤ ‡§Ü‡§†‡§µ‡•á‡§Ç ‡§Æ‡•á‡§Ç", "‡§õ‡§†‡§µ‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§†‡§µ‡•á‡§Ç ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç", "‡§ï‡§π‡•Ä‡§Ç ‡§®‡§π‡•Ä‡§Ç"],
                    correct: 2
                }
            ],
            8: [
                {
                    question: "‡§Ö‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï‡§∞‡§£ ‡§Æ‡•á‡§Ç '‡§Ö‡§™‡•Ç‡§∞‡•ç‡§µ' ‡§ï‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§Ö‡§∞‡•ç‡§• ‡§π‡•à?",
                    options: ["‡§™‡•Å‡§∞‡§æ‡§®‡§æ", "‡§®‡§Ø‡§æ ‡§Ø‡§æ ‡§Ö‡§≠‡•Ç‡§§‡§™‡•Ç‡§∞‡•ç‡§µ", "‡§Æ‡§ß‡•ç‡§Ø‡§Æ", "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø"],
                    correct: 1
                },
                {
                    question: "‡§Ü‡§†‡§µ‡•á‡§Ç ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§∏‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§π‡•ã‡§§‡§æ ‡§π‡•à?",
                    options: ["‡§Ü‡§∞‡•ç‡§§ ‡§ß‡•ç‡§Ø‡§æ‡§®", "‡§∞‡•å‡§¶‡•ç‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§®", "‡§ß‡§∞‡•ç‡§Æ ‡§ß‡•ç‡§Ø‡§æ‡§®", "‡§∂‡•Å‡§ï‡•ç‡§≤ ‡§ß‡•ç‡§Ø‡§æ‡§®"],
                    correct: 3
                }
            ],
            9: [
                {
                    question: "‡§Ö‡§®‡§ø‡§µ‡•É‡§§‡•ç‡§§‡§ø‡§ï‡§∞‡§£ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§ï‡§∑‡§æ‡§Ø‡•á‡§Ç ‡§∞‡§π ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç?",
                    options: ["‡§∏‡§≠‡•Ä ‡§ï‡§∑‡§æ‡§Ø‡•á‡§Ç", "‡§ï‡•á‡§µ‡§≤ ‡§∏‡•ç‡§•‡•Ç‡§≤ ‡§ï‡§∑‡§æ‡§Ø‡•á‡§Ç", "‡§ï‡•á‡§µ‡§≤ ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§ï‡§∑‡§æ‡§Ø‡•á‡§Ç", "‡§ï‡•ã‡§à ‡§ï‡§∑‡§æ‡§Ø ‡§®‡§π‡•Ä‡§Ç"],
                    correct: 2
                },
                {
                    question: "‡§®‡§µ‡•á‡§Ç ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§ú‡•ç‡§µ‡§≤‡§® ‡§Æ‡§æ‡§Ø‡§æ ‡§ï‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?",
                    options: ["‡§¨‡§¢‡§º ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à", "‡§ò‡§ü ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à", "‡§®‡§∑‡•ç‡§ü ‡§π‡•ã ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à", "‡§µ‡•à‡§∏‡•Ä ‡§π‡•Ä ‡§∞‡§π‡§§‡•Ä ‡§π‡•à"],
                    correct: 2
                }
            ],
            10: [
                {
                    question: "‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ‡§∏‡§æ‡§Ç‡§™‡§∞‡§æ‡§Ø ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§ï‡§∑‡§æ‡§Ø ‡§¨‡§ö‡•Ä ‡§∞‡§π‡§§‡•Ä ‡§π‡•à?",
                    options: ["‡§ï‡•ç‡§∞‡•ã‡§ß", "‡§Æ‡§æ‡§®", "‡§Æ‡§æ‡§Ø‡§æ", "‡§≤‡•ã‡§≠"],
                    correct: 3
                },
                {
                    question: "‡§¶‡§∏‡§µ‡•á‡§Ç ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á ‡§ï‡§ø‡§§‡§®‡•á ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§π‡•à‡§Ç?",
                    options: ["‡§è‡§ï", "‡§¶‡•ã", "‡§§‡•Ä‡§®", "‡§ö‡§æ‡§∞"],
                    correct: 2
                }
            ],
            11: [
                {
                    question: "‡§â‡§™‡§∂‡§æ‡§Ç‡§§ ‡§Æ‡•ã‡§π ‡§Æ‡•á‡§Ç ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø ‡§ï‡§∞‡•ç‡§Æ ‡§ï‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§π‡•à?",
                    options: ["‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡§æ‡§∂", "‡§Ö‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§â‡§™‡§∂‡§Æ", "‡§µ‡•É‡§¶‡•ç‡§ß‡§ø", "‡§∏‡•ç‡§•‡§ø‡§∞ ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ"],
                    correct: 1
                },
                {
                    question: "‡§â‡§™‡§∂‡§Æ ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    options: ["‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä", "‡§Ö‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä", "‡§¨‡§¢‡§º‡§§‡§æ ‡§∞‡§π‡§§‡§æ ‡§π‡•à", "‡§ò‡§ü‡§§‡§æ ‡§∞‡§π‡§§‡§æ ‡§π‡•à"],
                    correct: 1
                }
            ],
            12: [
                {
                    question: "‡§ï‡•ç‡§∑‡•Ä‡§£‡§Æ‡•ã‡§π ‡§ï‡§æ ‡§Ö‡§∞‡•ç‡§• ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    options: ["‡§Æ‡•ã‡§π ‡§ï‡§æ ‡§â‡§™‡§∂‡§Æ", "‡§Æ‡•ã‡§π ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡§æ‡§∂", "‡§Æ‡•ã‡§π ‡§ï‡•Ä ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø", "‡§Æ‡•ã‡§π ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ"],
                    correct: 1
                },
                {
                    question: "‡§¨‡§æ‡§∞‡§π‡§µ‡•á‡§Ç ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á ‡§µ‡§æ‡§™‡§∏‡•Ä ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•à?",
                    options: ["‡§π‡§æ‡§Å", "‡§®‡§π‡•Ä‡§Ç", "‡§ï‡§≠‡•Ä-‡§ï‡§≠‡•Ä", "‡§ï‡•á‡§µ‡§≤ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç"],
                    correct: 1
                }
            ],
            13: [
                {
                    question: "‡§∏‡§Ø‡•ã‡§ó‡§ï‡•á‡§µ‡§≤‡•Ä ‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    options: ["‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§Ø‡•ã‡§ó", "‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ø‡•ã‡§ó", "‡§® ‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§® ‡§Ø‡•ã‡§ó", "‡§ï‡•á‡§µ‡§≤ ‡§Ø‡•ã‡§ó"],
                    correct: 1
                },
                {
                    question: "‡§§‡•á‡§∞‡§π‡§µ‡•á‡§Ç ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§§‡§®‡•á ‡§ï‡§∞‡•ç‡§Æ ‡§¨‡§Ç‡§ß‡§§‡•á ‡§π‡•à‡§Ç?",
                    options: ["‡§Ü‡§†", "‡§ö‡§æ‡§∞", "‡§¶‡•ã", "‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"],
                    correct: 3
                }
            ]
        };

        // Game state
        let currentGunasthan = 1;
        let totalMoves = 0;
        let highestReached = 1;
        let gameStartTime = Date.now();
        let gameHistory = [];
        let quizScore = 0;
        let achievements = new Set(['üéØ Start Journey']);
        let selectedQuizOption = -1;
        
        // Timer system for higher gunasthans
        let deathTimer = null;
        let timeLimit = 300; // 5 minutes in seconds
        let timeRemaining = 0;
        let timerActive = false;

        let karmaLevels = {
            '‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø': 80,      // Reduced for better gameplay
            '‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø': 60,
            '‡§¶‡§∞‡•ç‡§∂‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø': 60,
            '‡§Ö‡§®‡•ç‡§§‡§∞‡§æ‡§Ø': 50,
            '‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞': 40
        };

        // Initialize game
        function initGame() {
            updateDisplay();
            updateProgressPath();
            updateKarmaDisplay();
            updateAchievements();
            startTimer();
            checkDeathTimer();
        }

        // Death timer functions
        function startDeathTimer() {
            if (currentGunasthan >= 7 && !timerActive) {
                timerActive = true;
                timeRemaining = timeLimit;
                document.getElementById('timer-warning').classList.remove('hidden');
                
                deathTimer = setInterval(() => {
                    timeRemaining--;
                    updateTimerDisplay();
                    
                    if (timeRemaining <= 0) {
                        handleDeathTimeout();
                    } else if (timeRemaining <= 60) {
                        // Warning in last minute
                        document.getElementById('timer-warning').style.background = 'linear-gradient(135deg, #fecaca, #f87171)';
                        document.getElementById('timer-warning').style.borderColor = '#ef4444';
                    } else if (timeRemaining <= 120) {
                        // Warning in last 2 minutes
                        document.getElementById('timer-warning').style.background = 'linear-gradient(135deg, #fed7aa, #fdba74)';
                        document.getElementById('timer-warning').style.borderColor = '#f97316';
                    }
                }, 1000);
                
                showMessage('warning', '‚è∞ ‡§Æ‡§∞‡§£‡§ï‡§æ‡§≤ ‡§∂‡•Å‡§∞‡•Ç! ‡§Ö‡§¨ ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§∏‡§Æ‡§Ø ‡§π‡•à‡•§ ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§Æ‡§∞‡§£ ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ 4th ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡§æ ‡§™‡§°‡§º‡•á‡§ó‡§æ!');
            }
        }

        function stopDeathTimer() {
            if (deathTimer) {
                clearInterval(deathTimer);
                deathTimer = null;
                timerActive = false;
                document.getElementById('timer-warning').classList.add('hidden');
            }
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('countdown-display').textContent = display;
            
            // Flash effect when time is low
            if (timeRemaining <= 30) {
                document.getElementById('countdown-display').style.animation = 'flash 0.5s infinite';
            } else if (timeRemaining <= 60) {
                document.getElementById('countdown-display').style.animation = 'pulse 1s infinite';
            }
        }

        function handleDeathTimeout() {
            stopDeathTimer();
            
            // Force transition to 4th gunasthan due to death
            showMessage('error', 'üíÄ ‡§Æ‡§∞‡§£‡§ï‡§æ‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§! ‡§Æ‡§∞‡§£ ‡§ï‡•Ä ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§∏‡•á ‡§Ü‡§™ ‡§ö‡§§‡•Å‡§∞‡•ç‡§• ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ ‡§≤‡•á ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§');
            
            setTimeout(() => {
                currentGunasthan = 4; // ‡§Æ‡§∞‡§£ ‡§ï‡•Ä ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§∏‡•á
                totalMoves++;
                updateKarmaLevels({‡§∏‡§≠‡•Ä: 15}); // Penalty for not completing in time
                
                gameHistory.push({
                    from: gameHistory[gameHistory.length - 1]?.to || currentGunasthan,
                    to: 4,
                    choice: "‡§Æ‡§∞‡§£ ‡§ï‡•Ä ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§∏‡•á (Death due to time limit)",
                    time: Date.now() - gameStartTime
                });
                
                updateDisplay();
                updateProgressPath();
                updateKarmaDisplay();
                
                showMessage('info', 'üîÑ ‡§®‡§Ø‡§æ ‡§ú‡§®‡•ç‡§Æ! ‡§Ü‡§™ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ö‡§§‡•Å‡§∞‡•ç‡§• ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§');
            }, 2000);
        }

        function checkDeathTimer() {
            if (currentGunasthan >= 7 && currentGunasthan < 14) {
                startDeathTimer();
            } else {
                stopDeathTimer();
            }
        }

        function updateDisplay() {
            const gunasthan = gunasthansData[currentGunasthan];
            
            // Update gunasthan display
            const displayEl = document.getElementById('gunasthan-display');
            displayEl.style.background = `linear-gradient(135deg, ${gunasthan.color}, ${gunasthan.color}dd)`;
            displayEl.innerHTML = `
                <div class="gunasthan-number">${currentGunasthan}</div>
                <div class="gunasthan-name">${gunasthan.nameHi}</div>
                <div class="gunasthan-english">${gunasthan.nameEn} - ${gunasthan.english}</div>
                <div class="gunasthan-description">${gunasthan.description}</div>
            `;
            
            // Update scenario content
            const scenario = gameScenarios[currentGunasthan];
            if (scenario) {
                document.getElementById('scenario-content').innerHTML = `
                    <div class="scenario-title">${scenario.title}</div>
                    <div class="scenario-text"><strong>‡§∏‡•ç‡§•‡§ø‡§§‡§ø:</strong> ${scenario.content}</div>
                    <div class="scenario-text"><strong>‡§™‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡§ø:</strong> ${scenario.scenario}</div>
                `;
                
                updateChoices(scenario.choices);
            } else if (currentGunasthan === 14) {
                document.getElementById('scenario-content').innerHTML = `
                    <div class="scenario-title">üéØ ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§ï‡•Ä ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∏‡•Ä‡§Æ‡§æ</div>
                    <div class="scenario-text">‡§Ü‡§™ ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞ ‡§™‡§∞ ‡§π‡•à‡§Ç‡•§ ‡§∏‡§≠‡•Ä ‡§ï‡§∞‡•ç‡§Æ ‡§®‡§∑‡•ç‡§ü ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§</div>
                `;
                updateChoices([{
                    target: "moksha",
                    title: "üïâÔ∏è ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø",
                    description: "‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§ö‡§ï‡•ç‡§∞ ‡§∏‡•á ‡§Æ‡•Å‡§ï‡•ç‡§§‡§ø",
                    difficulty: "automatic",
                    karma: {},
                    quiz: false
                }]);
            }
            
            // Update stats
            document.getElementById('current-stage').textContent = currentGunasthan;
            document.getElementById('total-moves').textContent = totalMoves;
            document.getElementById('highest-reached').textContent = highestReached;
            document.getElementById('quiz-score').textContent = quizScore;
            document.getElementById('achievement-count').textContent = achievements.size;
        }

        function updateChoices(choices) {
            const container = document.getElementById('choices-container');
            if (!choices || choices.length === 0) {
                container.innerHTML = `<div class="message info">‡§á‡§∏ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§ï‡§ø‡§è ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</div>`;
                return;
            }
            
            let html = '';
            choices.forEach((choice, index) => {
                const isValid = choice.target === "moksha" || transitionRules[currentGunasthan].canGoTo.includes(choice.target);
                const isWrongChoice = choice.title.startsWith('üö´');
                
                // Check karma requirements for positive choices
                const karmaValid = isWrongChoice || checkKarmaRequirements(choice);
                
                // Color coding for choices
                let choiceColor = '#3b82f6'; // Default blue
                if (isWrongChoice) {
                    choiceColor = '#ef4444'; // Red for wrong choices
                } else if (choice.target > currentGunasthan) {
                    choiceColor = '#10b981'; // Green for progressive choices
                } else if (choice.target < currentGunasthan) {
                    choiceColor = '#f59e0b'; // Orange for regressive choices
                }
                
                html += `
                    <button class="choice-button ${!isValid || !karmaValid ? 'disabled' : ''}" 
                            style="background: linear-gradient(135deg, ${choiceColor}, ${adjustColor(choiceColor, -20)});"
                            onclick="makeChoice(${typeof choice.target === 'string' ? `'${choice.target}'` : choice.target}, ${index})"
                            ${!isValid || !karmaValid ? 'disabled' : ''}>
                        <div class="choice-header">
                            <div class="choice-title">${choice.title}</div>
                        </div>
                        <div class="choice-description">${choice.description}</div>
                        <div class="choice-effects">
                            ${choice.quiz ? 'üìù ‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï' : ''}
                            ${!karmaValid ? ' | ‚ö†Ô∏è ‡§â‡§ö‡•ç‡§ö ‡§ï‡§∞‡•ç‡§Æ ‡§á‡§∏ ‡§™‡§• ‡§ï‡•ã ‡§∞‡•ã‡§ï ‡§∞‡§π‡§æ ‡§π‡•à' : ''}
                            ${!isValid ? ' | ‚ùå ‡§Ö‡§µ‡•à‡§ß ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£' : ''}
                        </div>
                    </button>
                `;
            });
            
            container.innerHTML = html || '<div class="message warning">No valid choices available.</div>';
        }

        function adjustColor(color, amount) {
            return color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));
        }

        function checkKarmaRequirements(choice) {
            // Wrong choices are always available (tempting!)
            if (choice.title.startsWith('üö´')) {
                return true;
            }
            
            // Much more accessible karma requirements for gameplay
            if (choice.target > currentGunasthan + 4) {
                return karmaLevels['‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø'] < 30;  // Only for very extreme jumps (like 1‚Üí6+)
            } else if (choice.target > currentGunasthan + 2) {
                return karmaLevels['‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø'] < 85;  // For big jumps (like 1‚Üí4, 1‚Üí5)
            } else if (choice.target > currentGunasthan) {
                return true;  // Always allow single step progress
            }
            return true;
        }

        function makeChoice(targetGunasthan, choiceIndex) {
            if (targetGunasthan === "moksha") {
                achieveMoksha();
                return;
            }
            
            const scenario = gameScenarios[currentGunasthan];
            const choice = scenario.choices[choiceIndex];
            
            // Handle wrong choices (üö´) - immediate drop to 1st gunasthan
            if (choice.title.startsWith('üö´')) {
                handleWrongChoice(choice);
                return;
            }
            
            // Check if transition is valid for normal choices
            if (!transitionRules[currentGunasthan].canGoTo.includes(targetGunasthan)) {
                showMessage('error', '‚ùå ‡§Ø‡§π ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§∏‡§Ç‡§≠‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§');
                return;
            }
            
            // Handle quiz if required
            if (choice.quiz) {
                showQuiz(targetGunasthan, choice);
                return;
            }
            
            executeTransition(targetGunasthan, choice);
        }

        function handleWrongChoice(choice) {
            // Dramatic fall to 1st gunasthan
            showMessage('error', `üí• ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡§§‡§®! ${choice.title.replace('üö´ ', '')} ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§Ü‡§™ ‡§™‡•ç‡§∞‡§•‡§Æ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ó‡§ø‡§∞ ‡§ó‡§è!`);
            
            // Stop death timer if active
            stopDeathTimer();
            
            setTimeout(() => {
                // Store previous karma to show impact
                const previousKarma = {...karmaLevels};
                
                // Record the dramatic fall
                gameHistory.push({
                    from: currentGunasthan,
                    to: 1,
                    choice: choice.title,
                    time: Date.now() - gameStartTime
                });
                
                const previousGunasthan = currentGunasthan;
                
                // Reset to first gunasthan
                currentGunasthan = 1;
                totalMoves++;
                
                // Heavy karma penalty
                updateKarmaLevels(choice.karma || {‡§∏‡§≠‡•Ä: 30});
                
                // Show consequences
                setTimeout(() => {
                    showChoiceConsequences(
                        {karma: choice.karma || {‡§∏‡§≠‡•Ä: 30}, title: choice.title}, 
                        previousGunasthan, 
                        1, 
                        previousKarma
                    );
                }, 500);
                
                // Add specific achievement for experiencing fall
                if (!achievements.has('üíÄ Spiritual Fall')) {
                    achievements.add('üíÄ Spiritual Fall');
                    setTimeout(() => showMessage('info', 'üèÜ Achievement: Experienced Spiritual Fall - Learn from this!'), 3000);
                }
                
                updateDisplay();
                updateProgressPath();
                updateKarmaDisplay();
                updateAchievements();
                
                setTimeout(() => {
                    showMessage('warning', '‚ö†Ô∏è ‡§Ø‡§π ‡§ú‡•à‡§® ‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§π‡•à - ‡§ó‡§≤‡§§ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§î‡§∞ ‡§ï‡§∞‡•ç‡§Æ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ó‡§ø‡§∞‡§æ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§¨ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä ‡§∏‡•á ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡•á‡§Ç‡•§');
                }, 4000);
            }, 1500);
        }

        function showQuiz(targetGunasthan, choice) {
            const questions = quizQuestions[targetGunasthan] || [];
            if (questions.length === 0) {
                executeTransition(targetGunasthan, choice);
                return;
            }
            
            const randomQuestion = questions[Math.floor(Math.random() * questions.length)];
            
            let html = `
                <div class="quiz-header">
                    <div class="quiz-icon">üß†</div>
                    <div class="quiz-title">‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ - Knowledge Test</div>
                    <div style="color: #6b7280;">Answer correctly to proceed on your spiritual journey</div>
                </div>
                <div class="quiz-question">${randomQuestion.question}</div>
                <div class="quiz-options">
            `;
            
            randomQuestion.options.forEach((option, index) => {
                html += `
                    <div class="quiz-option" onclick="selectQuizOption(${index})">
                        ${String.fromCharCode(65 + index)}. ${option}
                    </div>
                `;
            });
            
            html += `
                </div>
                <button class="quiz-submit" onclick="submitQuiz(${targetGunasthan}, ${JSON.stringify(choice).replace(/"/g, '&quot;')}, ${randomQuestion.correct})" disabled>
                    ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡•Å‡§§ ‡§ï‡§∞‡•á‡§Ç (Submit Answer)
                </button>
            `;
            
            document.getElementById('quiz-container').innerHTML = html;
            document.getElementById('quiz-container').classList.remove('hidden');
        }

        function selectQuizOption(index) {
            document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('.quiz-option')[index].classList.add('selected');
            selectedQuizOption = index;
            document.querySelector('.quiz-submit').disabled = false;
        }

        function submitQuiz(targetGunasthan, choice, correctAnswer) {
            if (selectedQuizOption === -1) {
                showMessage('warning', '‚ö†Ô∏è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§');
                return;
            }
            
            document.getElementById('quiz-container').classList.add('hidden');
            
            if (selectedQuizOption === correctAnswer) {
                quizScore += 10; // Fixed scoring
                showMessage('success', '‚úÖ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞! ‡§Ü‡§™ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§');
                executeTransition(targetGunasthan, choice);
                
                // Achievement for correct answers
                if (quizScore >= 50 && !achievements.has('üß† Scholar')) {
                    achievements.add('üß† Scholar');
                    setTimeout(() => showMessage('info', 'üèÜ Achievement Unlocked: Scholar - 50+ Quiz Score!'), 3000);
                }
            } else {
                const previousKarma = {...karmaLevels};
                updateKarmaLevels({‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 5}); // Small penalty
                
                showMessage('error', '‚ùå ‡§ó‡§≤‡§§ ‡§â‡§§‡•ç‡§§‡§∞! ‡§Ö‡§ß‡§ø‡§ï ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§');
                
                // Show karma consequences for wrong answer
                setTimeout(() => {
                    showChoiceConsequences(
                        {karma: {‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø: 5}, title: "‡§ó‡§≤‡§§ ‡§â‡§§‡•ç‡§§‡§∞ (Wrong Answer)"}, 
                        currentGunasthan, 
                        currentGunasthan, 
                        previousKarma
                    );
                }, 1000);
                
                updateKarmaDisplay();
            }
            
            selectedQuizOption = -1;
        }

        function showChoiceConsequences(choice, previousGunasthan, targetGunasthan, previousKarma) {
            if (!choice.karma || Object.keys(choice.karma).length === 0) {
                return; // No karma changes to show
            }
            
            let consequenceMsg = `<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; margin: 15px 0;">`;
            consequenceMsg += `<div style="font-weight: 600; color: #1e40af; margin-bottom: 10px;">üìä ‡§Ü‡§™‡§ï‡•á ‡§ï‡§∞‡•ç‡§Æ ‡§™‡§∞ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ:</div>`;
            
            // Show specific karma changes
            const karmaChanges = [];
            Object.entries(choice.karma).forEach(([karmaType, change]) => {
                if (karmaType === '‡§∏‡§≠‡•Ä') {
                    if (change > 0) {
                        karmaChanges.push(`üî¥ ‡§∏‡§≠‡•Ä ‡§ï‡§∞‡•ç‡§Æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: +${change}% (‡§™‡§æ‡§™ ‡§¨‡§Ç‡§ß)`);
                    } else {
                        karmaChanges.push(`üü¢ ‡§∏‡§≠‡•Ä ‡§ï‡§∞‡•ç‡§Æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: ${change}% (‡§∂‡•Å‡§≠ ‡§ï‡§∞‡•ç‡§Æ)`);
                    }
                } else {
                    const direction = change > 0 ? 'üî¥' : 'üü¢';
                    const action = change > 0 ? '‡§µ‡•É‡§¶‡•ç‡§ß‡§ø' : '‡§ï‡•ç‡§∑‡§Ø';
                    karmaChanges.push(`${direction} ${karmaType}: ${change > 0 ? '+' : ''}${change}% (${action})`);
                }
            });
            
            consequenceMsg += karmaChanges.join('<br>');
            
            // Add spiritual interpretation
            const totalKarmaLevel = Object.values(karmaLevels).reduce((a, b) => a + b, 0) / Object.keys(karmaLevels).length;
            let spiritualStatus = '';
            
            if (totalKarmaLevel > 80) {
                spiritualStatus = 'üî¥ ‡§Ö‡§§‡•ç‡§Ø‡§ß‡§ø‡§ï ‡§ï‡§∞‡•ç‡§Æ ‡§¨‡§Ç‡§ß - ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ï‡§†‡§ø‡§®';
            } else if (totalKarmaLevel > 60) {
                spiritualStatus = 'üü° ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§ï‡§∞‡•ç‡§Æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø - ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä ‡§∏‡•á ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡•á‡§Ç';
            } else if (totalKarmaLevel > 40) {
                spiritualStatus = 'üü¢ ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§ï‡§∞‡•ç‡§Æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø - ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§∏‡§Ç‡§≠‡§µ';
            } else if (totalKarmaLevel > 20) {
                spiritualStatus = '‚ú® ‡§®‡§ø‡§Æ‡•ç‡§® ‡§ï‡§∞‡•ç‡§Æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø - ‡§â‡§ö‡•ç‡§ö ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§â‡§™‡§≤‡§¨‡•ç‡§ß';
            } else {
                spiritualStatus = 'üåü ‡§®‡•ç‡§Ø‡•Ç‡§®‡§§‡§Æ ‡§ï‡§∞‡•ç‡§Æ - ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§ñ‡•Å‡§≤‡§æ';
            }
            
            consequenceMsg += `<div style="margin-top: 15px; padding: 10px; background: #f0f9ff; border-left: 4px solid #3b82f6; border-radius: 6px;">`;
            consequenceMsg += `<strong>‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§∏‡•ç‡§•‡§ø‡§§‡§ø:</strong><br>${spiritualStatus}`;
            consequenceMsg += `</div>`;
            
            // Add choice wisdom/lesson
            let wisdom = '';
            if (choice.title.includes('‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ') || choice.title.includes('‡§∏‡§Æ‡•ç‡§Ø‡§ï')) {
                wisdom = 'üí° <strong>‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ:</strong> ‡§∏‡§ö‡•ç‡§ö‡•Ä ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ ‡§∏‡§≠‡•Ä ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ï‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§π‡•à‡•§';
            } else if (choice.title.includes('‡§µ‡•ç‡§∞‡§§') || choice.title.includes('‡§∏‡§Ç‡§Ø‡§Æ')) {
                wisdom = 'üí° <strong>‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ:</strong> ‡§Ü‡§ö‡§∞‡§£ ‡§ï‡•Ä ‡§∂‡•Å‡§¶‡•ç‡§ß‡§§‡§æ ‡§ï‡§∞‡•ç‡§Æ ‡§®‡§ø‡§∞‡•ç‡§ú‡§∞‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•à‡•§';
            } else if (choice.title.includes('‡§ß‡•ç‡§Ø‡§æ‡§®') || choice.title.includes('‡§∏‡§æ‡§ß‡§®‡§æ')) {
                wisdom = 'üí° <strong>‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ:</strong> ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§î‡§∞ ‡§∏‡§æ‡§ß‡§®‡§æ ‡§∏‡•á ‡§ï‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§∂‡•Ä‡§ò‡•ç‡§∞ ‡§ï‡•ç‡§∑‡§Ø ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§';
            } else if (choice.title.startsWith('üö´')) {
                wisdom = '‚ö†Ô∏è <strong>‡§ö‡•á‡§§‡§æ‡§µ‡§®‡•Ä:</strong> ‡§ó‡§≤‡§§ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§î‡§∞ ‡§ï‡§∞‡•ç‡§Æ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡§§‡§® ‡§≤‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§';
            } else {
                wisdom = 'üìö <strong>‡§∏‡•ç‡§Æ‡§∞‡§£:</strong> ‡§π‡§∞ ‡§ï‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§´‡§≤ ‡§Ü‡§§‡•ç‡§Æ‡§æ ‡§™‡§∞ ‡§™‡§°‡§º‡§§‡§æ ‡§π‡•à‡•§';
            }
            
            if (wisdom) {
                consequenceMsg += `<div style="margin-top: 10px; font-style: italic; color: #4b5563;">${wisdom}</div>`;
            }
            
            consequenceMsg += `</div>`;
            
            // Show the message
            const messageContainer = document.getElementById('message-container');
            messageContainer.innerHTML = `<div class="message info" style="animation: messageSlide 0.5s ease;">${consequenceMsg}</div>`;
            
            // Clear after some time
            setTimeout(() => {
                if (messageContainer.innerHTML.includes('‡§Ü‡§™‡§ï‡•á ‡§ï‡§∞‡•ç‡§Æ ‡§™‡§∞ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ')) {
                    messageContainer.innerHTML = '';
                }
            }, 8000);
        }

        function executeTransition(targetGunasthan, choice) {
            // Record history
            gameHistory.push({
                from: currentGunasthan,
                to: targetGunasthan,
                choice: choice.title,
                time: Date.now() - gameStartTime
            });
            
            // Store previous karma levels to show the change
            const previousKarma = {...karmaLevels};
            
            // Update game state
            const previousGunasthan = currentGunasthan;
            currentGunasthan = targetGunasthan;
            totalMoves++;
            if (currentGunasthan > highestReached) {
                highestReached = currentGunasthan;
            }
            
            // Update karma levels
            updateKarmaLevels(choice.karma || {});
            
            // Show detailed choice consequence message
            showChoiceConsequences(choice, previousGunasthan, targetGunasthan, previousKarma);
            
            // Check achievements
            checkAchievements(previousGunasthan, targetGunasthan);
            
            // Handle timer for higher gunasthans
            if (targetGunasthan >= 7 && previousGunasthan < 7) {
                // Starting timer zone
                setTimeout(() => startDeathTimer(), 1000);
            } else if (targetGunasthan < 7 && previousGunasthan >= 7) {
                // Leaving timer zone
                stopDeathTimer();
            } else if (targetGunasthan >= 14) {
                // Reached final stage
                stopDeathTimer();
            }
            
            // Show transition message
            const gunasthan = gunasthansData[targetGunasthan];
            if (targetGunasthan > previousGunasthan) {
                setTimeout(() => showMessage('success', `üéâ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡•ç‡§∞‡§ó‡§§‡§ø! ‡§Ü‡§™ ${gunasthan.nameHi} (‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ${targetGunasthan}) ‡§Æ‡•á‡§Ç ‡§™‡§π‡•Å‡§Ç‡§ö ‡§ó‡§è ‡§π‡•à‡§Ç!`), 2000);
            } else {
                setTimeout(() => showMessage('warning', `üìâ ‡§Ü‡§™ ${gunasthan.nameHi} (‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ${targetGunasthan}) ‡§Æ‡•á‡§Ç ‡§Ü ‡§ó‡§è ‡§π‡•à‡§Ç‡•§`), 2000);
            }
            
            // Special milestone messages
            setTimeout(() => showMilestoneMessages(targetGunasthan), 3000);
            
            // Update display
            setTimeout(() => {
                updateDisplay();
                updateProgressPath();
                updateKarmaDisplay();
                updateAchievements();
                checkDeathTimer(); // Ensure timer is properly managed
            }, 1000);
        }

        function showMilestoneMessages(gunasthan) {
            const messages = {
                4: 'üåü ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø! ‡§Ö‡§¨ ‡§Ü‡§™ ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§Æ‡§æ‡§∞‡•ç‡§ó ‡§™‡§∞ ‡§π‡•à‡§Ç‡•§',
                5: 'üôè ‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§µ‡•ç‡§∞‡§§! ‡§ó‡•É‡§π‡§∏‡•ç‡§• ‡§ß‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§™‡§æ‡§≤‡§® ‡§∂‡•Å‡§∞‡•Ç‡•§',
                6: 'üë®‚Äçü¶≤ ‡§Æ‡•Å‡§®‡§ø ‡§¶‡•Ä‡§ï‡•ç‡§∑‡§æ! ‡§Ü‡§™‡§®‡•á ‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§ï‡§æ ‡§§‡•ç‡§Ø‡§æ‡§ó ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à‡•§',
                7: '‚ö° ‡§Ö‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§! ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§ß‡§®‡§æ‡•§',
                8: 'üî• ‡§∂‡•Å‡§ï‡•ç‡§≤ ‡§ß‡•ç‡§Ø‡§æ‡§®! ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•Ä‡§¢‡§º‡•Ä ‡§ï‡§æ ‡§Ü‡§∞‡§Ç‡§≠‡•§',
                10: 'üíé ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§ï‡§∑‡§æ‡§Ø! ‡§ï‡•á‡§µ‡§≤ ‡§≤‡•ã‡§≠ ‡§ï‡•Ä ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ ‡§õ‡§æ‡§Ø‡§æ‡•§',
                12: '‚ú® ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø ‡§ï‡§∞‡•ç‡§Æ ‡§®‡§æ‡§∂! ‡§Ö‡§¨ ‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§®‡§ø‡§ï‡§ü ‡§π‡•à‡•§',
                13: 'üåü ‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø! ‡§Ü‡§™ ‡§∏‡§∞‡•ç‡§µ‡§ú‡•ç‡§û ‡§π‡•à‡§Ç!',
                14: 'üïâÔ∏è ‡§Ö‡§Ø‡•ã‡§ó ‡§ï‡•á‡§µ‡§≤‡•Ä! ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞ ‡§™‡§∞!'
            };
            
            if (messages[gunasthan]) {
                setTimeout(() => showMessage('info', messages[gunasthan]), 1500);
            }
        }

        function checkAchievements(from, to) {
            // First Samyaktva
            if (to === 4 && !achievements.has('üíé First Right Belief')) {
                achievements.add('üíé First Right Belief');
                showMessage('info', 'üèÜ Achievement: First Right Belief!');
            }
            
            // Monk Life
            if (to >= 6 && !achievements.has('üë®‚Äçü¶≤ Monastic Life')) {
                achievements.add('üë®‚Äçü¶≤ Monastic Life');
                showMessage('info', 'üèÜ Achievement: Monastic Life!');
            }
            
            // Spiritual Ladder
            if (to >= 8 && !achievements.has('üî• Spiritual Ladder')) {
                achievements.add('üî• Spiritual Ladder');
                showMessage('info', 'üèÜ Achievement: Spiritual Ladder!');
            }
            
            // Destroyed Delusion
            if (to === 12 && !achievements.has('‚ú® Destroyed Delusion')) {
                achievements.add('‚ú® Destroyed Delusion');
                showMessage('info', 'üèÜ Achievement: Destroyed Delusion!');
            }
            
            // Omniscience
            if (to === 13 && !achievements.has('üåü Omniscience')) {
                achievements.add('üåü Omniscience');
                showMessage('info', 'üèÜ Achievement: Omniscience Achieved!');
            }
            
            // Speed runs
            if (to === 14 && totalMoves <= 10 && !achievements.has('‚ö° Lightning Journey')) {
                achievements.add('‚ö° Lightning Journey');
                showMessage('info', 'üèÜ Achievement: Lightning Journey (< 10 moves)!');
            }
            
            // Karma master
            if (Object.values(karmaLevels).every(v => v < 20) && !achievements.has('üßò Karma Master')) {
                achievements.add('üßò Karma Master');
                showMessage('info', 'üèÜ Achievement: Karma Master!');
            }
            
            // Timer achievements
            if (to >= 14 && timerActive && timeRemaining > 240 && !achievements.has('‚ö° Speed Master')) {
                achievements.add('‚ö° Speed Master');
                showMessage('info', 'üèÜ Achievement: Speed Master - Completed with time to spare!');
            }
        }

        function achieveMoksha() {
            achievements.add('üïâÔ∏è Moksha Achieved');
            
            showModal(`
                <div style="text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 20px;">üïâÔ∏è</div>
                    <h2 style="color: #f59e0b; margin-bottom: 15px;">‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø!</h2>
                    <p style="margin-bottom: 20px;">‡§¨‡§ß‡§æ‡§à ‡§π‡•ã! ‡§Ü‡§™‡§®‡•á ‡§∏‡§Ç‡§∏‡§æ‡§∞ ‡§ö‡§ï‡•ç‡§∞ ‡§∏‡•á ‡§Æ‡•Å‡§ï‡•ç‡§§‡§ø ‡§™‡§æ ‡§≤‡•Ä ‡§π‡•à‡•§</p>
                    <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <strong>Journey Statistics:</strong><br>
                        Total Moves: ${totalMoves}<br>
                        Time Taken: ${document.getElementById('game-time').textContent}<br>
                        Quiz Score: ${quizScore}<br>
                        Achievements: ${achievements.size}
                    </div>
                    <p style="color: #6b7280; font-style: italic;">‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§§‡•ç‡§Æ‡§æ ‡§Ö‡§¨ ‡§∏‡§ø‡§¶‡•ç‡§ß ‡§ó‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§π‡•à!</p>
                </div>
            `);
            
            // Confetti effect (simple)
            setTimeout(() => {
                for (let i = 0; i < 50; i++) {
                    createConfetti();
                }
            }, 500);
        }

        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.style.position = 'fixed';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = '-10px';
            confetti.style.width = '10px';
            confetti.style.height = '10px';
            confetti.style.backgroundColor = ['#f59e0b', '#3b82f6', '#10b981', '#ec4899'][Math.floor(Math.random() * 4)];
            confetti.style.borderRadius = '50%';
            confetti.style.pointerEvents = 'none';
            confetti.style.zIndex = '10000';
            confetti.style.animation = 'fall 3s linear forwards';
            
            document.body.appendChild(confetti);
            
            setTimeout(() => confetti.remove(), 3000);
        }

        function updateKarmaLevels(changes) {
            Object.entries(changes).forEach(([karma, change]) => {
                if (karma === '‡§∏‡§≠‡•Ä') {
                    Object.keys(karmaLevels).forEach(k => {
                        karmaLevels[k] = Math.max(0, Math.min(100, karmaLevels[k] + change));
                    });
                } else if (karmaLevels.hasOwnProperty(karma)) {
                    karmaLevels[karma] = Math.max(0, Math.min(100, karmaLevels[karma] + change));
                }
            });
        }

        function updateKarmaDisplay() {
            const container = document.getElementById('karma-display');
            
            let html = `
                <div class="karma-title">üîó ‡§ï‡§∞‡•ç‡§Æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø (Karmic Bondage Levels)</div>
                <div class="karma-bars">
            `;
            
            Object.entries(karmaLevels).forEach(([name, level]) => {
                const color = level > 70 ? '#ef4444' : level > 40 ? '#f59e0b' : level > 20 ? '#10b981' : '#14b8a6';
                html += `
                    <div class="karma-bar">
                        <div class="karma-name">${name}</div>
                        <div class="karma-progress">
                            <div class="karma-fill" style="width: ${level}%; background: ${color}"></div>
                        </div>
                        <div class="karma-value">${level}%</div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        function updateProgressPath() {
            const container = document.getElementById('progress-path');
            let html = '';
            
            for (let i = 1; i <= 14; i++) {
                let className = 'path-stage ';
                if (i < currentGunasthan || (currentGunasthan === 14 && achievements.has('üïâÔ∏è Moksha Achieved'))) {
                    className += 'completed';
                } else if (i === currentGunasthan) {
                    className += 'current';
                } else {
                    className += 'locked';
                }
                
                html += `<div class="${className}" title="‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ${i}: ${gunasthansData[i].nameHi}" onclick="showGunasthanInfo(${i})">${i}</div>`;
                if (i < 14) html += '<div class="path-arrow">‚Üí</div>';
            }
            
            // Add moksha symbol if achieved
            if (achievements.has('üïâÔ∏è Moksha Achieved')) {
                html += '<div class="path-arrow">‚Üí</div><div class="path-stage completed" style="background: linear-gradient(135deg, #f59e0b, #d97706);">üïâÔ∏è</div>';
            }
            
            container.innerHTML = html;
        }

        function updateAchievements() {
            const list = document.getElementById('achievements-list');
            list.innerHTML = Array.from(achievements).map(a => `<span class="achievement-item">${a}</span>`).join('');
        }

        function showMessage(type, text) {
            const container = document.getElementById('message-container');
            container.innerHTML = `<div class="message ${type}">${text}</div>`;
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }

        function startTimer() {
            setInterval(() => {
                const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('game-time').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function resetGame() {
            if (confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§®‡§à ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç? (Are you sure you want to start a new journey?)')) {
                // Stop any active timers
                stopDeathTimer();
                
                // Reset all game state
                currentGunasthan = 1;
                totalMoves = 0;
                highestReached = 1;
                gameStartTime = Date.now();
                gameHistory = [];
                quizScore = 0;
                achievements = new Set(['üéØ Start Journey']);
                selectedQuizOption = -1;
                timeRemaining = 0;
                timerActive = false;
                
                karmaLevels = {
                    '‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø': 80,      // Reduced for better gameplay
                    '‡§ú‡•ç‡§û‡§æ‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø': 60,
                    '‡§¶‡§∞‡•ç‡§∂‡§®‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø': 60,
                    '‡§Ö‡§®‡•ç‡§§‡§∞‡§æ‡§Ø': 50,
                    '‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞': 40
                };
                
                // Clear UI elements
                document.getElementById('message-container').innerHTML = '';
                document.getElementById('quiz-container').classList.add('hidden');
                document.getElementById('timer-warning').classList.add('hidden');
                
                // Reset timer display styles
                const timerDisplay = document.getElementById('countdown-display');
                timerDisplay.style.animation = '';
                timerDisplay.textContent = '--:--';
                
                // Reset timer warning colors
                const timerWarning = document.getElementById('timer-warning');
                timerWarning.style.background = 'linear-gradient(135deg, #fef3c7, #fde68a)';
                timerWarning.style.borderColor = '#f59e0b';
                
                // Update display
                updateDisplay();
                updateProgressPath();
                updateKarmaDisplay();
                updateAchievements();
                
                showMessage('success', 'üÜï ‡§®‡§à ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§∂‡•Å‡§∞‡•Ç! ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä ‡§∏‡•á ‡§ö‡•Å‡§®‡§æ‡§µ ‡§ï‡§∞‡•á‡§Ç‡•§');
            }
        }

        function showHelp() {
            showModal(`
                <h3>üéØ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ - ‡§ó‡•á‡§Æ ‡§ó‡§æ‡§á‡§°</h3>
                <div style="text-align: left; line-height: 1.6;">
                    <p><strong>‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø:</strong> 14 ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§®‡•ã‡§Ç ‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡§∞‡§ï‡•á ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡§æ‡•§</p>
                    
                    <h4 style="margin: 15px 0 10px 0; color: #1e40af;">üéÆ ‡§ï‡•à‡§∏‡•á ‡§ñ‡•á‡§≤‡•á‡§Ç:</h4>
                    <ul style="margin-left: 20px;">
                        <li>‡§π‡§∞ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§è‡§ï ‡§ö‡•Å‡§®‡•á‡§Ç</li>
                        <li>‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä ‡§∏‡•á ‡§ö‡•Å‡§®‡§æ‡§µ ‡§ï‡§∞‡•á‡§Ç - ‡§ï‡•Å‡§õ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§≤‡§æ‡§§‡•á ‡§π‡•à‡§Ç, ‡§ï‡•Å‡§õ ‡§™‡§§‡§®</li>
                        <li>‡§ï‡•Å‡§õ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è quiz ‡§ï‡§æ ‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•á‡§Ç</li>
                        <li>7th ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§∏‡§Æ‡§Ø ‡§∏‡•Ä‡§Æ‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡•Ä ‡§π‡•à</li>
                        <li>‡§∏‡§Æ‡§Ø ‡§∏‡•Ä‡§Æ‡§æ ‡§Æ‡•á‡§Ç ‡§Æ‡•ã‡§ï‡•ç‡§∑ ‡§® ‡§™‡§π‡•Å‡§Ç‡§ö‡•á ‡§§‡•ã ‡§Æ‡§∞‡§£ ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ 4th ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡§æ ‡§™‡§°‡§º‡•á‡§ó‡§æ</li>
                    </ul>
                    
                    <h4 style="margin: 15px 0 10px 0; color: #1e40af;">‚è∞ ‡§∏‡§Æ‡§Ø ‡§∏‡•Ä‡§Æ‡§æ:</h4>
                    <ul style="margin-left: 20px;">
                        <li><strong>7th-14th ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§®:</strong> 5 ‡§Æ‡§ø‡§®‡§ü ‡§ï‡§æ ‡§∏‡§Æ‡§Ø</li>
                        <li><strong>‡§∏‡§Æ‡§Ø ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§:</strong> ‡§Æ‡§∞‡§£ ‡§ï‡•Ä ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§∏‡•á 4th ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§∞‡•ç‡§ú‡§®‡•ç‡§Æ</li>
                        <li><strong>‡§∞‡§Ç‡§ó ‡§ï‡•ã‡§°:</strong> ‡§™‡•Ä‡§≤‡§æ (‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø) ‚Üí ‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä (2 ‡§Æ‡§ø‡§®‡§ü) ‚Üí ‡§≤‡§æ‡§≤ (1 ‡§Æ‡§ø‡§®‡§ü)</li>
                    </ul>
                    
                    <h4 style="margin: 15px 0 10px 0; color: #1e40af;">üß≠ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ö‡•Å‡§®‡§®‡§æ:</h4>
                    <ul style="margin-left: 20px;">
                        <li>‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ü‡§™‡§ï‡•ã ‡§â‡§∏‡§ï‡•á ‡§ï‡§∞‡•ç‡§Æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§¶‡§ø‡§ñ‡§æ‡§è ‡§ú‡§æ‡§è‡§Ç‡§ó‡•á</li>
                        <li>‡§ó‡§≤‡§§ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§Ü‡§™‡§ï‡•ã ‡§µ‡§æ‡§™‡§∏ ‡§™‡§π‡§≤‡•á ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§§‡§ï ‡§ó‡§ø‡§∞‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç</li>
                        <li>‡§ú‡•à‡§® ‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§ó‡§≤‡§§ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ó‡§ø‡§∞‡§æ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç</li>
                        <li>‡§∞‡§Ç‡§ó ‡§∏‡•á ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§Æ‡§ø‡§≤‡§§‡§æ ‡§π‡•à - ‡§π‡§∞‡§æ (‡§™‡•ç‡§∞‡§ó‡§§‡§ø), ‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä (‡§™‡§§‡§®), ‡§≤‡§æ‡§≤ (‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§∞‡§π‡•á‡§Ç)</li>
                        <li>‡§ï‡§∞‡•ç‡§Æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§¶‡•á‡§ñ‡§ï‡§∞ ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•á ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç</li>
                    </ul>
                    
                    <h4 style="margin: 15px 0 10px 0; color: #1e40af;">üîó ‡§ï‡§∞‡•ç‡§Æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ:</h4>
                    <ul style="margin-left: 20px;">
                        <li>‡§â‡§ö‡•ç‡§ö ‡§ï‡§∞‡•ç‡§Æ ‡§∏‡•ç‡§§‡§∞ = ‡§ï‡§Æ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™</li>
                        <li>‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ö‡•Å‡§®‡§ï‡§∞ ‡§ï‡§∞‡•ç‡§Æ ‡§ò‡§ü‡§æ‡§è‡§Ç</li>
                        <li>‡§¨‡§°‡§º‡•Ä ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§õ‡§≤‡§æ‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§Æ ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø ‡§ï‡§∞‡•ç‡§Æ ‡§ö‡§æ‡§π‡§ø‡§è</li>
                        <li>‡§ó‡§≤‡§§ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ (üö´) ‡§π‡§Æ‡•á‡§∂‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç - ‡§∏‡§æ‡§µ‡§ß‡§æ‡§® ‡§∞‡§π‡•á‡§Ç!</li>
                    </ul>
                    
                    <h4 style="margin: 15px 0 10px 0; color: #1e40af;">üí° ‡§∏‡•Å‡§ù‡§æ‡§µ:</h4>
                    <ul style="margin-left: 20px;">
                        <li>‡§ï‡§Æ ‡§ï‡§∞‡•ç‡§Æ ‡§∏‡•ç‡§§‡§∞ = ‡§â‡§ö‡•ç‡§ö ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡§•</li>
                        <li>Quiz ‡§Æ‡•á‡§Ç ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡•à‡§® ‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡§æ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç</li>
                        <li>‡§π‡§∞ ‡§ö‡•Å‡§®‡§æ‡§µ ‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•ã ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à</li>
                        <li>‡§ó‡§≤‡§§ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§∏‡•á ‡§≠‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§≤‡•á‡§Ç - ‡§µ‡•á ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§ñ‡§§‡§∞‡•á ‡§¶‡§∞‡•ç‡§∂‡§æ‡§§‡•á ‡§π‡•à‡§Ç</li>
                    </ul>
                </div>
            `);
        }

        function showProgress() {
            let progressText = `
                <h3>üìä Your Spiritual Journey Progress</h3>
                <div style="text-align: left;">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">
                        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px;">
                            <strong>Current Stage:</strong><br>
                            ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ${currentGunasthan}: ${gunasthansData[currentGunasthan].nameHi}
                        </div>
                        <div style="background: #f0fdf4; padding: 15px; border-radius: 8px;">
                            <strong>Highest Reached:</strong><br>
                            ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ${highestReached}
                        </div>
                        <div style="background: #fef3c7; padding: 15px; border-radius: 8px;">
                            <strong>Total Moves:</strong><br>
                            ${totalMoves} transitions
                        </div>
                        <div style="background: #fdf2f8; padding: 15px; border-radius: 8px;">
                            <strong>Quiz Score:</strong><br>
                            ${quizScore} points
                        </div>
                    </div>
            `;
            
            if (gameHistory.length > 0) {
                progressText += '<h4>üõ§Ô∏è Recent Journey:</h4><ul style="margin-left: 20px;">';
                gameHistory.slice(-5).forEach(move => {
                    progressText += `<li>G${move.from} ‚Üí G${move.to}: ${move.choice}</li>`;
                });
                progressText += '</ul>';
            }
            
            progressText += `
                    <h4>üèÜ Achievements (${achievements.size}):</h4>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;">
                        ${Array.from(achievements).map(a => `<span style="background: #e0e7ff; padding: 4px 8px; border-radius: 12px; font-size: 12px;">${a}</span>`).join('')}
                    </div>
                </div>
            `;
            
            showModal(progressText);
        }

        function showDefinitions() {
            showModal(`
                <h3>üìö Key Definitions</h3>
                <div style="text-align: left; line-height: 1.6; max-height: 400px; overflow-y: auto;">
                    <h4 style="color: #1e40af;">‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® (Gunasthan):</h4>
                    <p>‡§Ü‡§§‡•ç‡§Æ‡§æ ‡§ï‡•Ä ‡§Æ‡•ã‡§π ‡§î‡§∞ ‡§Ø‡•ã‡§ó ‡§ï‡•Ä ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§∏‡•á ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä 14 ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ‡§è‡§Ç‡•§</p>
                    
                    <h4 style="color: #1e40af;">‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ (Samyaktva):</h4>
                    <p>‡§ú‡§ø‡§®‡•á‡§®‡•ç‡§¶‡•ç‡§∞ ‡§≠‡§ó‡§µ‡§æ‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡§π‡•á ‡§ó‡§è ‡§∏‡§æ‡§§ ‡§§‡§§‡•ç‡§µ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ø‡§•‡§æ‡§∞‡•ç‡§• ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ‡§®‡•§</p>
                    
                    <h4 style="color: #1e40af;">‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø ‡§ï‡§∞‡•ç‡§Æ:</h4>
                    <p>‡§ú‡•ã ‡§Ü‡§§‡•ç‡§Æ‡§æ ‡§ï‡•á ‡§∏‡§Æ‡•ç‡§Ø‡§ï‡•ç‡§§‡•ç‡§µ ‡§î‡§∞ ‡§ö‡§æ‡§∞‡§ø‡§§‡•ç‡§∞ ‡§ï‡§æ ‡§ò‡§æ‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§</p>
                    
                    <h4 style="color: #1e40af;">‡§ï‡•á‡§µ‡§≤‡§ú‡•ç‡§û‡§æ‡§®:</h4>
                    <p>‡§ö‡§æ‡§∞ ‡§ò‡§æ‡§§‡§ø‡§Ø‡§æ ‡§ï‡§∞‡•ç‡§Æ‡•ã‡§Ç ‡§ï‡•á ‡§ï‡•ç‡§∑‡§Ø ‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§∏‡§∞‡•ç‡§µ‡§ú‡•ç‡§û‡§§‡§æ‡•§</p>
                    
                    <h4 style="color: #1e40af;">‡§Æ‡•ã‡§ï‡•ç‡§∑:</h4>
                    <p>‡§∏‡§≠‡•Ä ‡§ï‡§∞‡•ç‡§Æ‡•ã‡§Ç ‡§∏‡•á ‡§Æ‡•Å‡§ï‡•ç‡§§‡§ø ‡§î‡§∞ ‡§™‡§∞‡§Æ ‡§Ü‡§®‡§Ç‡§¶ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø‡•§</p>
                    
                    <p style="margin-top: 15px; color: #6b7280; font-style: italic;">
                        For complete definitions and detailed explanations, refer to authentic Jain scriptures and study the main 24 Thana application.
                    </p>
                </div>
            `);
        }

        function showGunasthanInfo(gunasthanId) {
            const g = gunasthansData[gunasthanId];
            const rule = transitionRules[gunasthanId];
            
            showModal(`
                <div style="text-align: center;">
                    <div style="width: 60px; height: 60px; border-radius: 50%; background: ${g.color}; color: white; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; margin: 0 auto 15px;">${gunasthanId}</div>
                    <h3 style="color: ${g.color};">${g.nameHi}</h3>
                    <p style="color: #6b7280; margin-bottom: 15px;">${g.nameEn} - ${g.english}</p>
                    <p style="margin-bottom: 15px;">${g.description}</p>
                    
                    <div style="text-align: left; background: #f9fafb; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <strong>Possible Transitions:</strong><br>
                        ${rule.description}<br><br>
                        ${rule.canGoTo.length > 0 ? 
                            `Can transition to: ${rule.canGoTo.map(id => `G${id} (${gunasthansData[id].nameHi})`).join(', ')}` :
                            'üïâÔ∏è Final stage - Liberation achieved!'
                        }
                    </div>
                </div>
            `);
        }

        function showModal(content) {
            document.getElementById('modal-body').innerHTML = content;
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modal').style.display = 'flex';
        }

        function closeModal(event) {
            const modal = document.getElementById('modal');
            if (modal) {
                modal.classList.add('hidden');
                modal.style.display = 'none';
            }
        }

        // Force close any stuck modals
        function forceCloseModal() {
            const modal = document.getElementById('modal');
            if (modal) {
                modal.classList.add('hidden');
                modal.style.display = 'none';
                modal.innerHTML = '';
            }
        }

        function emergencyReset() {
            console.log('Emergency reset triggered');
            resetGame();
        }

        // Debug function to manually reduce karma for testing
        function reduceKarmaForTesting() {
            Object.keys(karmaLevels).forEach(k => {
                karmaLevels[k] = Math.max(0, karmaLevels[k] - 20);
            });
            updateKarmaDisplay();
            updateDisplay();
            console.log('Karma levels reduced for testing:', karmaLevels);
        }

        // Debug function to check why choices might be disabled
        function debugChoiceAvailability() {
            const scenario = gameScenarios[currentGunasthan];
            if (!scenario) return;
            
            console.log(`Current Gunasthan: ${currentGunasthan}`);
            console.log(`Valid transitions: ${transitionRules[currentGunasthan].canGoTo}`);
            console.log(`Current Karma Levels:`, karmaLevels);
            console.log(`‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø level: ${karmaLevels['‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø']}`);
            
            scenario.choices.forEach((choice, index) => {
                const isValid = choice.target === "moksha" || transitionRules[currentGunasthan].canGoTo.includes(choice.target);
                const karmaValid = choice.title.startsWith('üö´') || checkKarmaRequirements(choice);
                console.log(`Choice ${index}: ${choice.title}`);
                console.log(`  Target: ${choice.target}, Valid Transition: ${isValid}, Karma Valid: ${karmaValid}`);
                
                // Show karma requirement details
                if (!choice.title.startsWith('üö´')) {
                    if (choice.target > currentGunasthan + 4) {
                        console.log(`  Karma requirement: ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø < 30 (current: ${karmaLevels['‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø']})`);
                    } else if (choice.target > currentGunasthan + 2) {
                        console.log(`  Karma requirement: ‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø < 85 (current: ${karmaLevels['‡§Æ‡•ã‡§π‡§®‡•Ä‡§Ø']})`);
                    } else if (choice.target > currentGunasthan) {
                        console.log(`  Karma requirement: Always allowed for single step`);
                    } else {
                        console.log(`  Karma requirement: Always allowed`);
                    }
                }
            });
        }

        // Initialize the game when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Force close any modals first
            forceCloseModal();
            
            // Ensure quiz container is hidden
            const quizContainer = document.getElementById('quiz-container');
            if (quizContainer) {
                quizContainer.classList.add('hidden');
            }
            
            // Clear any stuck messages
            const messageContainer = document.getElementById('message-container');
            if (messageContainer) {
                messageContainer.innerHTML = '';
            }
            
            // Initialize game
            initGame();
            
            // Add escape key handler
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    forceCloseModal();
                }
            });
            
            // Add click anywhere to close emergency button after 3 seconds
            setTimeout(() => {
                const emergencyBtn = document.getElementById('emergency-close');
                if (emergencyBtn && !emergencyBtn.classList.contains('hidden')) {
                    emergencyBtn.classList.add('hidden');
                }
            }, 3000);
            
            // Show initial help message with immediate choice display
            setTimeout(() => {
                showMessage('info', 'üéÆ ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! üö´ ‡§≤‡§æ‡§≤ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ñ‡§§‡§∞‡§®‡§æ‡§ï ‡§π‡•à‡§Ç - ‡§µ‡•á ‡§Ü‡§™‡§ï‡•ã 1st ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ó‡§ø‡§∞‡§æ ‡§¶‡•á‡§Ç‡§ó‡•á‡•§ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§ï‡§∞‡•ç‡§Æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§¶‡§ø‡§ñ‡§æ‡§è ‡§ú‡§æ‡§è‡§Ç‡§ó‡•á‡•§ 7th ‡§ó‡•Å‡§£‡§∏‡•ç‡§•‡§æ‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§∏‡§Æ‡§Ø ‡§∏‡•Ä‡§Æ‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§ó‡•Ä!');
                
                // Force update choices to ensure they show up
                const scenario = gameScenarios[currentGunasthan];
                if (scenario && scenario.choices) {
                    updateChoices(scenario.choices);
                }
                
                // Debug help for developers
                console.log('Debug commands available:');
                console.log('- debugChoiceAvailability(): Check why choices are disabled');
                console.log('- reduceKarmaForTesting(): Reduce karma levels for testing');
            }, 1000);
        });

        // Make functions globally available
        window.forceCloseModal = forceCloseModal;
        window.emergencyReset = emergencyReset;
        window.closeModal = forceCloseModal; // Alias for compatibility
        window.debugChoiceAvailability = debugChoiceAvailability; // Debug helper
        window.reduceKarmaForTesting = reduceKarmaForTesting; // Testing helper
    </script>
</body>
</html>
            